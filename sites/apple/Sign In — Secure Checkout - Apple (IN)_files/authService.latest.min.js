
/**
* **ACKNOWLEDGEMENTS:**
* https://appleid.cdn-apple.com/appleauth/static/jsapi/acknowledgements.txt
* 
*/

window.idmsapis=function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&'object'==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,'default',{enumerable:!0,value:e}),2&i&&'string'!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(i,'a',i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=59)}([function(e){var t=Array.isArray;e.exports=t},function(e,t,i){var n=i(9),o=n(Object,'create');e.exports=o},function(e,t,i){var n=i(41);e.exports=function(e,t){for(var i=e.length;i--;)if(n(e[i][0],t))return i;return-1}},function(e,t,i){var n=i(47);e.exports=function(e,t){var i=e.__data__;return n(t)?i['string'==typeof t?'string':'hash']:i.map}},function(e,t,i){var n=i(5),o=i(8);e.exports=function(e){return'symbol'==typeof e||o(e)&&n(e)=='[object Symbol]'}},function(e,t,i){function n(e){return null==e?void 0===e?d:s:c&&c in Object(e)?a(e):r(e)}var o=i(6),a=i(19),r=i(20),s='[object Null]',d='[object Undefined]',c=o?o.toStringTag:void 0;e.exports=n},function(e,t,i){var n=i(7),o=n.Symbol;e.exports=o},function(e,t,i){var n=i(17),o='object'==typeof self&&self&&self.Object===Object&&self,a=n||o||Function('return this')();e.exports=a},function(e){e.exports=function(e){return null!=e&&'object'==typeof e}},function(e,t,i){var n=i(28),o=i(33);e.exports=function(e,t){var i=o(e,t);return n(i)?i:void 0}},function(e){e.exports=function(e){var t=typeof e;return null!=e&&('object'==t||'function'==t)}},function(e,t,i){var n,o;(function(a,r){e.exports?e.exports=r():(n=r,o='function'==typeof n?n.call(t,i,t,e):n,!(o!==void 0&&(e.exports=o)))})(this,function(){'use strict';function e(e,t){var i,n=document.createElement(e||'div');for(i in t)n[i]=t[i];return n}function t(e){for(var t=1,i=arguments.length;t<i;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var o=['opacity',t,~~(100*e),n,i].join('-'),a=.01+100*(n/i),r=l(1-(1-e)/t*(100-a),e),s=c.substring(0,c.indexOf('Animation')).toLowerCase();return f[o]||(u.insertRule('@'+(s&&'-'+s+'-'||'')+'keyframes '+o+'{0%{opacity:'+r+'}'+a+'%{opacity:'+e+'}'+(a+.01)+'%{opacity:1}'+(a+t)%100+'%{opacity:'+e+'}100%{opacity:'+r+'}}',u.cssRules.length),f[o]=1),o}function i(e,t){var n,o,i=e.style;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==i[t])return t;for(o=0;o<p.length;o++)if(n=p[o]+t,void 0!==i[n])return n}function a(e,t){for(var o in t)e.style[i(e,o)||o]=t[o];return e}function r(e){for(var t,o=1;o<arguments.length;o++)for(var i in t=arguments[o],t)void 0===e[i]&&(e[i]=t[i]);return e}function s(e,t){return'string'==typeof e?e:e[t%e.length]}function d(e){this.opts=r(e||{},d.defaults,m)}function o(){function n(t,i){return e('<'+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}u.addRule('.spin-vml','behavior:url(#default#VML)'),d.prototype.lines=function(e,d){function o(){return a(n('group',{coordsize:i+' '+i,coordorigin:-l+' '+-l}),{width:i,height:i})}function c(e,i,c){t(f,t(a(o(),{rotation:360/d.lines*e+'deg',left:~~i}),t(a(n('roundrect',{arcsize:d.corners}),{width:l,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:c}),n('fill',{color:s(d.color,e),opacity:d.opacity}),n('stroke',{opacity:0}))))}var u,l=d.scale*(d.length+d.width),i=2*d.scale*l,p=2*(-(d.width+d.length)*d.scale)+'px',f=a(o(),{position:'absolute',top:p,left:p});if(d.shadow)for(u=1;u<=d.lines;u++)c(u,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)');for(u=1;u<=d.lines;u++)c(u);return t(e,f)},d.prototype.opacity=function(e,t,i,n){var o=e.firstChild;n=n.shadow&&n.lines||0,o&&t+n<o.childNodes.length&&(o=o.childNodes[t+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}}var c,u,l=Math.max,p=['webkit','Moz','ms','O'],f={},m={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:'#000',opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:'spinner',top:'50%',left:'50%',shadow:!1,hwaccel:!1,position:'absolute'};if(d.defaults={},r(d.prototype,{spin:function(t){this.stop();var n=this,r=n.opts,o=n.el=e(null,{className:r.className});if(a(o,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),t&&t.insertBefore(o,t.firstChild||null),o.setAttribute('role','progressbar'),n.lines(o,n.opts),!c){var s,d=0,i=(r.lines-1)*(1-r.direction)/2,u=r.fps,p=u/r.speed,f=(1-r.opacity)/(p*r.trail/100),m=p/r.lines;(function e(){d++;for(var t=0;t<r.lines;t++)s=l(1-(d+(r.lines-t)*m)%p*f,r.opacity),n.opacity(o,t*r.direction+i,s,r);n.timeout=n.el&&setTimeout(e,~~(1e3/u))})()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,d){function o(t,i){return a(e(),{position:'absolute',width:d.scale*(d.length+d.width)+'px',height:d.scale*d.width+'px',background:t,boxShadow:i,transformOrigin:'left',transform:'rotate('+~~(360/d.lines*l+d.rotate)+'deg) translate('+d.scale*d.radius+'px,0)',borderRadius:(d.corners*d.scale*d.width>>1)+'px'})}for(var u,l=0,i=(d.lines-1)*(1-d.direction)/2;l<d.lines;l++)u=a(e(),{position:'absolute',top:1+~(d.scale*d.width/2)+'px',transform:d.hwaccel?'translate3d(0,0,0)':'',opacity:d.opacity,animation:c&&n(d.opacity,d.trail,i+l*d.direction,d.lines)+' '+1/d.speed+'s linear infinite'}),d.shadow&&t(u,a(o('#000','0 0 4px #000'),{top:'2px'})),t(r,t(u,o(s(d.color,l),'0 0 1px rgba(0,0,0,.1)')));return r},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}}),'undefined'!=typeof document){u=function(){var i=e('style',{type:'text/css'});return t(document.getElementsByTagName('head')[0],i),i.sheet||i.styleSheet}();var g=a(e('group'),{behavior:'url(#default#VML)'});!i(g,'transform')&&g.adj?o():c=i(g,'animation')}return d})},function(e,t,i){var n=i(13),o=i(14);e.exports=function(e,t){return null!=e&&o(e,t,n)}},function(e){var t=Object.prototype,i=t.hasOwnProperty;e.exports=function(e,t){return null!=e&&i.call(e,t)}},function(e,t,i){var n=i(15),o=i(54),a=i(0),r=i(56),s=i(57),d=i(58);e.exports=function(e,t,i){t=n(t,e);for(var c,u=-1,l=t.length,p=!1;++u<l&&(c=d(t[u]),!!(p=null!=e&&i(e,c)));)e=e[c];return p||++u!=l?p:(l=null==e?0:e.length,!!l&&s(l)&&r(c,l)&&(a(e)||o(e)))}},function(e,t,i){var n=i(0),o=i(16),a=i(21),r=i(51);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:a(r(e))}},function(e,t,i){function n(e,t){if(o(e))return!1;var i=typeof e;return!!('number'==i||'symbol'==i||'boolean'==i||null==e||a(e))||s.test(e)||!r.test(e)||null!=t&&e in Object(t)}var o=i(0),a=i(4),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=n},function(e,t,i){(function(t){var i='object'==typeof t&&t&&t.Object===Object&&t;e.exports=i}).call(this,i(18))},function(e){var t=function(){return this}();try{t=t||new Function('return this')()}catch(i){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,i){var n=i(6),o=Object.prototype,a=o.hasOwnProperty,r=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),i=e[s];try{e[s]=void 0}catch(t){}var n=r.call(e);return t?e[s]=i:delete e[s],n}},function(e){var t=Object.prototype,i=t.toString;e.exports=function(e){return i.call(e)}},function(e,t,i){var n=i(22),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(''),e.replace(o,function(e,i,n,o){t.push(n?o.replace(a,'$1'):i||e)}),t});e.exports=r},function(e,t,i){var n=i(23);e.exports=function(e){var t=n(e,function(e){return i.size===500&&i.clear(),e}),i=t.cache;return t}},function(e,t,i){function n(e,t){if('function'!=typeof e||null!=t&&'function'!=typeof t)throw new TypeError(a);var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=i.cache;if(a.has(o))return a.get(o);var r=e.apply(this,n);return i.cache=a.set(o,r)||a,r};return i.cache=new(n.Cache||o),i}var o=i(24),a='Expected a function';n.Cache=o,e.exports=n},function(e,t,i){function n(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}var o=i(25),a=i(46),r=i(48),s=i(49),d=i(50);n.prototype.clear=o,n.prototype['delete']=a,n.prototype.get=r,n.prototype.has=s,n.prototype.set=d,e.exports=n},function(e,t,i){var n=i(26),o=i(38),a=i(45);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||o),string:new n}}},function(e,t,i){function n(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}var o=i(27),a=i(34),r=i(35),s=i(36),d=i(37);n.prototype.clear=o,n.prototype['delete']=a,n.prototype.get=r,n.prototype.has=s,n.prototype.set=d,e.exports=n},function(e,t,i){var n=i(1);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t,i){var n=i(29),o=i(30),a=i(10),r=i(32),s=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,p=u.hasOwnProperty,f=RegExp('^'+l.call(p).replace(s,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');e.exports=function(e){if(!a(e)||o(e))return!1;var t=n(e)?f:d;return t.test(r(e))}},function(e,t,i){var n=i(5),o=i(10);e.exports=function(e){if(!o(e))return!1;var t=n(e);return t=='[object Function]'||t=='[object GeneratorFunction]'||t=='[object AsyncFunction]'||t=='[object Proxy]'}},function(e,t,i){function n(e){return!!a&&a in e}var o=i(31),a=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||'');return e?'Symbol(src)_1.'+e:''}();e.exports=n},function(e,t,i){var n=i(7),o=n['__core-js_shared__'];e.exports=o},function(e){var t=Function.prototype,i=t.toString;e.exports=function(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+''}catch(t){}}return''}},function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,i){var n=i(1),o=Object.prototype,a=o.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var i=t[e];return i==='__lodash_hash_undefined__'?void 0:i}return a.call(t,e)?t[e]:void 0}},function(e,t,i){var n=i(1),o=Object.prototype,a=o.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?t[e]!==void 0:a.call(t,e)}},function(e,t,i){var n=i(1);e.exports=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&void 0===t?'__lodash_hash_undefined__':t,this}},function(e,t,i){function n(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}var o=i(39),a=i(40),r=i(42),s=i(43),d=i(44);n.prototype.clear=o,n.prototype['delete']=a,n.prototype.get=r,n.prototype.has=s,n.prototype.set=d,e.exports=n},function(e){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,i){var n=i(2),o=Array.prototype,a=o.splice;e.exports=function(e){var t=this.__data__,i=n(t,e);if(0>i)return!1;var o=t.length-1;return i==o?t.pop():a.call(t,i,1),--this.size,!0}},function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,i){var n=i(2);e.exports=function(e){var t=this.__data__,i=n(t,e);return 0>i?void 0:t[i][1]}},function(e,t,i){var n=i(2);e.exports=function(e){return-1<n(this.__data__,e)}},function(e,t,i){var n=i(2);e.exports=function(e,t){var i=this.__data__,o=n(i,e);return 0>o?(++this.size,i.push([e,t])):i[o][1]=t,this}},function(e,t,i){var n=i(9),o=i(7),a=n(o,'Map');e.exports=a},function(e,t,i){var n=i(3);e.exports=function(e){var t=n(this,e)['delete'](e);return this.size-=t?1:0,t}},function(e){e.exports=function(e){var t=typeof e;return'string'==t||'number'==t||'symbol'==t||'boolean'==t?'__proto__'!==e:null===e}},function(e,t,i){var n=i(3);e.exports=function(e){return n(this,e).get(e)}},function(e,t,i){var n=i(3);e.exports=function(e){return n(this,e).has(e)}},function(e,t,i){var n=i(3);e.exports=function(e,t){var i=n(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this}},function(e,t,i){var n=i(52);e.exports=function(e){return null==e?'':n(e)}},function(e,t,i){function n(e){if('string'==typeof e)return e;if(r(e))return a(e,n)+'';if(s(e))return u?u.call(e):'';var t=e+'';return'0'==t&&1/e==-d?'-0':t}var o=i(6),a=i(53),r=i(0),s=i(4),d=1/0,c=o?o.prototype:void 0,u=c?c.toString:void 0;e.exports=n},function(e){e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}},function(e,t,i){var n=i(55),o=i(8),a=Object.prototype,r=a.hasOwnProperty,s=a.propertyIsEnumerable,d=n(function(){return arguments}())?n:function(e){return o(e)&&r.call(e,'callee')&&!s.call(e,'callee')};e.exports=d},function(e,t,i){var n=i(5),o=i(8);e.exports=function(e){return o(e)&&n(e)=='[object Arguments]'}},function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,i){var n=typeof e;return i=null==i?9007199254740991:i,!!i&&('number'==n||'symbol'!=n&&t.test(e))&&-1<e&&0==e%1&&e<i}},function(e){e.exports=function(e){return'number'==typeof e&&-1<e&&0==e%1&&e<=9007199254740991}},function(e,t,i){var n=i(4);e.exports=function(e){if('string'==typeof e||n(e))return e;var t=e+'';return'0'==t&&1/e==-(1/0)?'-0':t}},function(e,t,i){'use strict';function n(e){return n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},n(e)}function o(e){return o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},o(e)}i.r(t);var a=function(e){var t=[];return Array.isArray(e)?e.forEach(function(e){t.push(e)}):t.push(e),t},r={getOriginFromUrl:function(e){if(!e)throw new TypeError('Invalid url',e);var t=document.implementation.createHTMLDocument(''),i=t.createElement('a');if(i.href=e,t.body.appendChild(i),':'===i.protocol||!/:/.test(i.href))throw new TypeError('Invalid URL');return i.protocol+'//'+i.host},setupACL:function(e){var t=a(e);return{whitelist:t,blacklist:[]}},checkDestinationDomain:function(e,t){if('undefined'!=typeof e&&null!==e&&'undefined'!=typeof e.destinationDomain)for(var n=0;n<e.destinationDomain.length;++n)if(t===e.destinationDomain[n])return!0;return!1},checkACL:function(e,t,n){var o=e.whitelist,a=e.blacklist,r=!1,s=!1;if(n&&{getRegisteredProcedures:!0,receivePingRequest:!0}[n])return!0;for(var d=0;d<o.length;++d)if(t===o[d]){r=!0;break}for(var i=0;i<a.length;++i)if(t===o[d]){s=!0;break}return r&&!s}},s=function(){function e(){return'object'===n(window.crypto)&&'function'==typeof window.crypto.getRandomValues&&'function'==typeof Uint32Array?window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296:Math.random()}function t(){for(var t=Math.floor,n=[],o='89AB',a=0;36>a;a++)n[a]='0123456789ABCDEF'[t(16*e())];return n[14]='4',n[19]=o[t(4*e())],n[8]=n[13]=n[18]=n[23]='-',n.join('')}function i(e){e.trim()&&(N=e+'.')}function o(e,t,n,o){if(!(n instanceof Array)){var a=e.toString(),r=a.substring(a.indexOf('(')+1,a.indexOf(')'));r=''===r?[]:r.split(', ');for(var s={},d=0;d<r.length;d++)s[r[d]]=d;var i=[];for(var c in n)if('undefined'!=typeof s[c])i[s[c]]=n[c];else throw'No such param: '+c;n=i}return'undefined'!=typeof o&&(n=n.concat(o)),e.apply(t,n)}function a(e){return N+JSON.stringify(e)}function s(e){return JSON.parse(e.substring(N.length))}function d(){return{jsonrpc:'2.0'}}function c(e,t,i){var n=d();return n.method=e,n.params=t,'undefined'!=typeof i&&(n.id=i),n}function u(e,t,i){return{code:e,message:t,data:i}}function l(e,t,i){var n=d();return n.id=i,'undefined'==typeof e||null===e?n.result='undefined'===t?null:t:n.error=e,n}function p(e){return!(e.publicProcedureName in L)&&(C[e.publicProcedureName]={publicProcedureName:e.publicProcedureName,procedure:e.procedure,context:e.procedure.context,isAsync:'undefined'!=typeof e.isAsynchronous&&e.isAsynchronous,acl:'undefined'==typeof e.acl?{whitelist:['(.*)'],blacklist:[]}:e.acl},!0)}function f(e){return!(e in L)&&(delete C[e],!0)}function m(e){return C[e]}function g(e){var t=e.event;if(t&&t.data&&'string'==typeof t.data&&0===t.data.indexOf(N)){var i=s(t.data),n={data:t.data,source:t.source,origin:t.origin,shouldCheckACL:!0};if('undefined'!=typeof i.method){v.push({a:new Date().getTime(),b:i.id,c:'rR',h:i.method,e:'f1:mR'});var o=h(i,n);null!==o&&w(n.source,o,n.origin,{callId:i.id,logType:'res',publicProcedureName:i.method,calledAt:'f1:f4'})}else b(i,n)}}function h(e,t){if('2.0'!==e.jsonrpc)return l(u(-32600,'Invalid request.','The recived JSON is not a valid JSON-RPC 2.0 request.'),null,null);var i=e.id,n=m(e.method);if('undefined'==typeof n)return'undefined'==typeof i?null:l(u(-32601,'Method not found.','The requested remote procedure does not exist or is not available.'),null,i);if(!t.shouldCheckACL||r.checkACL(n.acl,t.origin,n.publicProcedureName))try{if(n.isAsync){var a=function(e){w(t.source,l(null,e,i),t.origin)},s=function(e){w(t.source,l(u(-1,'Application error.',e.message),null,i),t.origin)};return o(n.procedure,n.context,e.params,[a,s,t]),null}try{var d=o(n.procedure,n.context,e.params,[t]);return'undefined'==typeof i?null:l(null,d,i)}catch(t){return l(u(-5,'Procedure error.','Procedure thrown exception'),null,i)}}catch(e){return'undefined'==typeof i?null:e.match('^(No such param)')?l(u(-32602,'Invalid params.',e.message),null,i):l(u(-1,'Application error.',e.message),null,i)}else return'undefined'==typeof i?null:l(u(-2,'Application error.','Access denied on server.'),null,i)}function b(e,t){var i=e.id,n=R[i],o={receivePingRequest:'rPR',getRegisteredProcedures:'gRP',ready:'r',config:'i'},a=new Date().getTime(),s={a:a,b:'',c:'rRE',f:'nPN',e:'f2:uRFRpcC'};if('undefined'==typeof n||null===n)return void v.push(s);if(delete R[i],!r.checkDestinationDomain(n,t.origin))return s.e='f2:cAF',void v.push(s);if('undefined'==typeof e.error){var d={destination:n.destination,publicProcedureName:n.publicProcedureName,params:n.params,status:'success',namespace:N,returnValue:e.result};v.push({a:a,b:n.callId,c:'rRS',h:o[n.publicProcedureName]?o[n.publicProcedureName]:n.publicProcedureName,e:'f2:rRS'}),n.onSuccess(d)}else{var c={destination:n.destination,publicProcedureName:n.publicProcedureName,params:n.params,status:'error',namespace:N,message:e.error.message+' '+e.error.data};O(c),v.push({a:a,b:n.callId,c:'rRE',f:c.message,h:o[n.publicProcedureName]?o[n.publicProcedureName]:n.publicProcedureName,e:'f2:rRE'}),n.onError(c)}}function y(e){if(e.retries&&0>e.retries)throw new Exception('number of retries must be 0 or higher');var n=[];if('undefined'==typeof e.destination||null===e.destination||'workerParent'===e.destination)n=[{context:null,type:'workerParent'}];else if('publish'===e.destination)n=P();else if(e.destination instanceof Array)for(var o=0;o<e.destination.length;o++)'workerParent'===e.destination[o]?n.push({context:null,type:'workerParent'}):'undefined'==typeof e.destination[o].frames?n.push({context:e.destination[o],type:'worker'}):n.push({context:e.destination[o],type:'window'});else'undefined'==typeof e.destination.frames?n.push({context:e.destination,type:'worker'}):n.push({context:e.destination,type:'window'});for(var o=0;o<n.length;o++){var i={destination:n[o].context,destinationDomain:'undefined'==typeof e.destinationDomain?['*']:'string'==typeof e.destinationDomain?[e.destinationDomain]:e.destinationDomain,publicProcedureName:e.publicProcedureName,onSuccess:'undefined'==typeof e.onSuccess?function(){}:e.onSuccess,onError:'undefined'==typeof e.onError?function(){}:e.onError,retries:'undefined'==typeof e.retries?5:e.retries,timeout:'undefined'==typeof e.timeout?500:e.timeout,status:'requestNotSent'},a='undefined'==typeof e.onError&&'undefined'==typeof e.onSuccess,r='undefined'==typeof e.params?[]:e.params,s=t();R[s]=i,i.callId=s,i.message=a?c(e.publicProcedureName,r):c(e.publicProcedureName,r,s),A(s)}}function w(e,t,i,n){var o={receivePingRequest:'rPR',getRegisteredProcedures:'gRP',ready:'r',config:'i'};if('undefined'==typeof n?v.push({a:new Date().getTime(),b:'',c:'uPM',h:'',e:'f3:uRpcC'}):v.push({a:new Date().getTime(),b:n.callId,c:n.logType||'req',h:o[n.publicProcedureName]?o[n.publicProcedureName]:n.publicProcedureName,e:n.calledAt}),'undefined'==typeof e||null===e)self.postMessage(a(t));else{if('undefined'!=typeof e.frames)return e.postMessage(a(t),i);e.postMessage(a(t))}}function A(e,t){self.setTimeout(function(){var n=R[e];if('undefined'!=typeof n&&!(t&&'pinging'!==n.status))if(-1>=n.retries)b(l(u(-4,'Application error.','Destination unavailable. '+n.timeout),null,e));else{if('requestSent'===n.status)return;if(0===n.retries||'available'===n.status){n.status='requestSent',n.retries=-1,R[e]=n;for(var o=0;o<n.destinationDomain.length;o++)n.calledAt='wSR:SR',w(n.destination,n.message,n.destinationDomain[o],n),self.setTimeout(function(){A(e)},n.timeout)}else{n.status='pinging',--n.retries;var i={destination:n.destination,publicProcedureName:'receivePingRequest',onSuccess:function(t){!0===t.returnValue&&'undefined'!=typeof R[e]&&'pinging'===R[e].status&&(R[e].status='available',A(e))},params:[n.publicProcedureName],retries:0,destinationDomain:n.destinationDomain};n.destinationDomain&&(i.destinationDomain=n.destinationDomain),y(i),R[e]=n,window.setTimeout(function(){R[e]&&'pinging'===R[e].status&&A(e,!0)},n.timeout/n.retries)}}},10)}function k(e,t,i,n){'addEventListener'in e?e.addEventListener(t,i,n):e.attachEvent('on'+t,i)}function I(e,t,i){return function(n){e({event:n,source:t,destinationType:i})}}function x(){var e=[];if('undefined'!=typeof window){e.push({context:window.top,type:'window'});for(var t,n=0;'undefined'!=typeof e[n];n++){t=e[n];for(var i=0;i<t.context.frames.length;i++)e.push({context:t.context.frames[i],type:'window'})}}else e.push({context:window,type:'workerParent'});return e}function _(){return allWorkers}function P(){var e=x(),t=_(),i=e.concat(t);return i}function T(){var e=[],t='undefined'==typeof window.frames?'':window.location.protocol+'//'+window.location.host+(''===window.location.port?'':':'+window.location.port);for(var i in C)if(i in L)continue;else e.push({publicProcedureName:C[i].publicProcedureName,acl:C[i].acl,origin:t});return e}if('undefined'==typeof JSON||'undefined'==typeof JSON.stringify||'undefined'==typeof JSON.parse)throw'pmrpc requires the JSON library';var v=[];if('undefined'==typeof window.postMessage&&'undefined'==typeof window.onconnect)throw'pmrpc requires the HTML5 cross-document messaging and worker APIs';var N='pmrpc.',O=function(e){if(window.sessionStorage){var t=e.publicProcedureName+'.'+N,i={procedure:e.publicProcedureName,status:e.status,description:e.message,namespace:e.namespace?e.namespace:N};sessionStorage.setItem(t,JSON.stringify(i))}else;},S=e(),C={},R={},L={};if('window'in window){var D=I(g,null,'window');k(window,'message',D,!1)}else throw'Pmrpc must be loaded within a browser window';return p({publicProcedureName:'receivePingRequest',procedure:function(e){return'undefined'!=typeof m(e)}}),p({publicProcedureName:'getRegisteredProcedures',procedure:T}),L={getRegisteredProcedures:null,receivePingRequest:null},{register:p,unregister:f,call:function(e){e.namespace&&i(e.namespace),y(e)},discover:function(e){function t(e,t){for(var n=0;n<e.length;n++)e[n].origin.match(new RegExp(a))&&e[n].publicProcedureName.match(new RegExp(r))&&s.push({publicProcedureName:e[n].publicProcedureName,destination:t,procedureACL:e[n].acl,destinationOrigin:e[n].origin})}var n=null;if('undefined'==typeof e.destination){n=P();for(var o=0;o<n.length;o++)n[o]=n[o].context}else n=e.destination;var a='undefined'==typeof e.originRegex?'(.*)':e.originRegex,r='undefined'==typeof e.nameRegex?'(.*)':e.nameRegex,i=n.length,s=[];this.call({destination:n,destinationDomain:'*',publicProcedureName:'getRegisteredProcedures',onSuccess:function(n){i--,t(n.returnValue,n.destination),0===i&&e.callback(s)},onError:function(){i--,0===i&&e.callback(s)}})},setNamespace:i,sessionLog:O,getMessageLog:function(){return v},getMessageStringLog:function(){var e={receivePingRequest:'rPR',getRegisteredProcedures:'gRP',ready:'r',config:'i',getConfig:'gC'},t=[],i=[];return v.forEach(function(n){i=[],Object.keys(n).forEach(function(t){var o=n[t];if('a'===t){var a=n[t]+'';o=a.substring(5)}else'b'===t?o=n[t].substring(0,8):'h'===t&&(o=e[o]?e[o]:o);i.push(t+':'+o)}),t.push(i.join(' '))}),t.join('|')}}},d=s,c=i(11),u=i(12),l={},p={},f={},m=function(e){return p[e]||(p[e]=[]),p[e]},g=function(e){p[e]&&(p[e]=[])},h=function(e,t){m(e).forEach(function(e){return e(t)})},b=function(e,t){l[e]&&(l[e]=null);var i=t?t:'closed';h(e,i),g(e),f[e]&&(clearInterval(f[e]),f[e]=null)},y=function(e,t){l[e]&&('function'==typeof l[e].close&&l[e].close(),b(e,t))},w=function(e,t,i){var n=window.open(e,t,i);return n&&(l[t]=n,f[t]=setInterval(function(){n.closed&&b(t,'closed_by_user')},300)),n},A=function(e,t){m(e).push(t)},k=function(e){return!!l[e]},I=function(e,t){var i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;return{left:i/2-e/2+window.screenLeft,top:n/2-t/2+window.screenTop}},x=700,_=700,P=I(x,_).left,T=I(x,_).top,v={strWindowFeatures:'width='.concat(x,',height=').concat(_,',left=').concat(P,',top=').concat(T,',resizable=no,location=no,menubar=no'),windowName:'AppleAuthentication'},N=function(e){y(v.windowName,e)},O=function(e){return N('closed_trigger_new_signing_flow'),w(e,v.windowName,v.strWindowFeatures)},S=function(){return k(v.windowName)},C=function(e){return A(v.windowName,e)};'format es6','use strict';i.d(t,'auth',function(){return M});var R={state:'authorize',authorizePath:'/auth/authorize/signin',codePath:'/auth/authorize/validate',enableFirstPartyOAuth:!1,code:void 0,oauthState:void 0,appleOAuth:{requestor:{}}},L=function(){R.enableFirstPartyOAuth=!1,R.code=void 0,R.oauthState=void 0,R.appleOAuth={requestor:{}}},D=function(e){for(var t=[],i=0;i<e.length;i++)t.push([e[i][0],e[i][1]]);return t},F={name:'aid-auth-widget',nameSpace:'pmrpc',path:'/auth/signin',initiatePath:'/signin/initiate',isFailedToLoadFirstPartyOAuth:!1,getUrlPath:function(e){return e.features&&e.features.useSignInInitiate?F.initiatePath:R.enableFirstPartyOAuth?'authorize'===R.state?R.authorizePath:'code'===R.state?R.codePath:F.path:F.path},urlParamTransform:function(e,t){var n=[],o={widgetDomain:!0,widgetKey:!0};if(R.enableFirstPartyOAuth){n.push(['frame_id',t.iframeId]);for(var a=0;a<e.length;a++)o[e[a][0]]||n.push([e[a][0],e[a][1]]),'iframeId'===e[a][0]&&'undefined'==typeof R.oauthState&&(t.appleOAuth.requestor.state=e[a][1],R.oauthState=e[a][1]);if(t.appleOAuth.requestor.id)n.push(['client_id',t.appleOAuth.requestor.id]);else throw new TypeError('requestor.id is either not provided or is not defined.');t.appleOAuth.requestor.scope&&n.push(['scope',t.appleOAuth.requestor.scope]),t.appleOAuth.requestor.teamId&&n.push(['team_id',t.appleOAuth.requestor.teamId]),t.appleOAuth.requestor.redirectURI&&n.push(['redirect_uri',t.appleOAuth.requestor.redirectURI]),t.appleOAuth.requestor.responseType&&n.push(['response_type',t.appleOAuth.requestor.responseType]),t.appleOAuth.requestor.responseMode&&n.push(['response_mode',t.appleOAuth.requestor.responseMode]),R.oauthState&&n.push(['state',R.oauthState]),'code'===R.state&&(n.push(['code',R.code]),'undefined'!=typeof t.alternateTokenCookie&&''!==t.alternateTokenCookie&&n.push(['altToken',t.alternateTokenCookie.toString()]),'string'==typeof t.OAuthClientId&&''!==t.OAuthClientId&&n.push(['rc_oauthid',t.OAuthClientId]),'string'==typeof t.OAuthToken&&''!==t.OAuthToken&&n.push(['rc_oauthtoken',t.OAuthToken]))}else n=D(e),'undefined'!=typeof t.requestorAppId&&''!==t.requestorAppId&&n.push(['appId',t.requestorAppId]);return'undefined'!=typeof t.resetCRToken&&''!==t.resetCRToken&&n.push(['key',t.resetCRToken]),'undefined'!=typeof t.resetCRLang&&''!==t.resetCRLang&&n.push(['language',t.resetCRLang]),'undefined'!=typeof t.domainId&&''!==t.domainId&&n.push(['rv',t.domainId]),n.push(['authVersion','latest']),n}},E=new function(e){e.name=e.name||'widget-loader',e.nameSpace=e.nameSpace||'widgetLoader',e.frameLoadTimeout=e.frameLoadTimeout||60000,e.configTimeout=e.configTimeout||30000,e.path=e.path||'',e.urlTransform=e.urlTransform||function(e){return e},e.widgetWindowReference=void 0;var t,i,n,a,s=new d,l={},p=!1,f=!1,m=!1,g=!1,h=!1,b=[],y=['ready','config'],w=[],A={},k={lines:12,length:12,width:5,radius:14,scale:.4,corners:1,color:'#000',opacity:.25,rotate:0,direction:1,speed:1.7,trail:60,fps:20,zIndex:2e9,className:'spinner',top:'50%',left:'50%',shadow:!1,hwaccel:!1,position:'absolute'},I=new c(k);s.context=self.name||'Parent',s||(s=new d),s.setNamespace(e.nameSpace);var x=function(e,t,i){if(e&&''!==e.trim()?e=e.trim().toUpperCase():void 0,'START_WITH'===e){if('string'==typeof t)'LITE'===t.toString().toUpperCase().trim()&&(k.color='#fff');else if('object'===o(t))if(t.autoThemeAdjust&&'function'==typeof window.matchMedia){var n=window.matchMedia('(prefers-color-scheme: dark)');n.matches&&(k.color='#fff'),n.addListener(function(t){var e=t.matches;k.color=e?'#fff':'#000'})}else('dark-standard'===t.defaultTheme||'lite'===t.defaultTheme)&&(k.color='#fff');I.spin(document.getElementById(i))}else'STOP'===e&&I.stop()},_=function(t){p=!1,f=!1,m=!1,g=!1,h=!1,a=void 0,w=[],e.widgetWindowReference=void 0,'undefined'==typeof t.returnUrl&&'undefined'!=typeof t.returnURL&&(t.returnUrl=t.returnURL);var i=D(t);if(i.result){l.config=t,F(l.config),('undefined'==typeof l.config.usePopup||!l.config.usePopup)&&('undefined'==typeof l.config.waitAnimation||''===l.config.waitAnimation.trim()||l.config.waitAnimation&&'FALSE'!==l.config.waitAnimation.toUpperCase().trim())&&x('START_WITH',l.config.theme,l.config.containerId),S&&N(),'undefined'!=typeof l.config.usePopup&&l.config.usePopup?(U(l.config,e.name),q(l.config,e.name)):E(l.config,e.name),V(),B();var n=+t.frameLoadTimeout;e.frameLoadTimeout=!isNaN(n)&&e.frameLoadTimeout<n?n:e.frameLoadTimeout,h||P(),a=l.config.serviceURL}else if(t.callbacks&&t.callbacks.onAuthFailure){var o='';i.missingPaths.map(function(e){o+='\t '+e+'\t '}),t.callbacks.onAuthFailure({result:{code:'MISSING_MANDATORY_INIT_OPTIONS',message:'Missing mandatory initOptions: ['+o+'] \n Refer the documentation for more information. \n',data:{}}})}},P=function(){h=!1,t=setTimeout(function(){f||(f=!0,z(e.name),'function'==typeof l.config.loadFailed&&l.config.loadFailed({error:'timeout'}))},e.frameLoadTimeout)},T=function(e,t){if('undefined'!=typeof l.config&&l.config.serviceURL){n=r.getOriginFromUrl(l.config.serviceURL);var i,o=!!A[e];i=o?r.setupACL([window.location.origin,n]):r.setupACL(n),s||(s=new d),s.register({publicProcedureName:e,procedure:t,acl:i})}else b.push({__key__:e,__callback__:t})},v=function(t){return JSON.parse(t.replace(e.nameSpace+'.','')).method},R=function(){for(var e='auth-'+Math.random().toString(36).substr(2,8),t=1;3>=t;t++)e+='-'+Math.random().toString(36).substr(2,4);return e+='-'+Math.random().toString(36).substr(2,8),e},L=function(t){var n,o=t.serviceURL,a=e.path,r=[],s=[],d='';if(e.getUrlPath&&(a=e.getUrlPath(t)),o+=a,d=o,o=o+'?widgetKey='+t.serviceKey,r.push(['widgetKey',t.serviceKey]),t.locale&&(o+='&language='+t.locale,r.push(['language',t.locale])),t.features&&t.features.useEyebrowTextbox&&(o+='&useEyebrowTextbox='+t.features.useEyebrowTextbox,r.push(['useEyebrowTextbox',t.features.useEyebrowTextbox])),t.skVersion&&!isNaN(t.skVersion)&&(o+='&skVersion='+t.skVersion,r.push(['skVersion',t.skVersion])),'undefined'!=typeof t.devAppDomain&&''!==t.devAppDomain&&(o+='&widgetDomain='+t.devAppDomain,r.push(['widgetDomain',t.devAppDomain])),n='undefined'==typeof t.iframeId?R():t.iframeId,l.iframeId=n,t.iframeId=n,o+='&iframeId='+n,r.push(['iframeId',n]),e.urlParamTransform){r=e.urlParamTransform(r,t);for(var c=0;c<r.length;c++)s.push(r[c].join('='));l.srcUrl=d+'?'+s.join('&')}else l.srcUrl=e.urlTransform(o,t);return l.srcUrl},D=function(e){var t={result:!1},i=[],n=function(e,t){var n=!0;return t.map(function(t){u(e,t)||(n=!1,i.push(t))}),n};return t.result=n(e,['serviceKey','serviceURL','callbacks.onAuthSuccess']),t.result&&(!e.usePopup&&(t.result=n(e,['containerId'])),e.context&&'TEST_IDP'===e.context.trim().toUpperCase()&&(t.result=n(e,['context','domainName','gsWebToken','alternateDSID','orgId','entityId'])),e.context&&'MICROSOFT_OBO'===e.context.trim().toUpperCase()&&(t.result=n(e,['context','gsWebToken','orgId','alternateDSID','entityId']))),t.result||(t.missingPaths=i),t},F=function(e){if(''!==e.locale&&e.locale||void 0,('undefined'==typeof l.config.waitAnimation||''===l.config.waitAnimation.trim()||l.config.waitAnimation&&'FALSE'!==l.config.waitAnimation.toUpperCase().trim())&&void 0,e.features||void 0,''===e.serviceKey||!e.serviceKey)throw new TypeError('serviceKey is either not provided or is not defined.');else if(''===e.serviceURL||!e.serviceURL)throw new TypeError('serviceURL is either not provided or is not defined.');else if(!e.usePopup&&(''===e.containerId||!e.containerId))throw new TypeError('containerId is either not provided or is not defined.');else if(!e.callbacks||!e.callbacks.completed||'function'!=typeof e.callbacks.completed);else if(!e.callbacks||!e.callbacks.failed||'function'!=typeof e.callbacks.failed);},E=function(t,i){var n=document.createElement('iframe');n.src=L(t),n.width=t.width||'100%',n.height=t.height||'100%',n.id=i+'-iFrame',n.name=i,n.scrolling='no',n.frameBorder='0',n.setAttribute('role','none'),window.document.getElementById(t.containerId).appendChild(n),e.widgetWindowReference=window.frames[i]},q=function(e){C(function(t){if(('closed_by_user'===t||'closed_trigger_new_signing_flow'==t)&&e.callbacks&&e.callbacks.onAuthCancel){var i='closed'===t?'USER_CLOSE_POPUP':'USER_TRIGGER_NEW_SIGNIN_FLOW';e.callbacks.onAuthCancel({result:i})}})},U=function(t){var i=L(t),n=O(i);n?e.widgetWindowReference=n:!f&&(f=!0,'function'==typeof l.config.loadFailed&&l.config.loadFailed({error:'popup_blocked_by_browser'}))},M=function(e){var t=document.getElementById(e+'-iFrame');null!==t&&'IFRAME'===t.nodeName&&t.parentNode&&t.parentNode.removeChild(t)},z=function(e){S?N():M(e)},j=function(){s.call({destination:e.widgetWindowReference,publicProcedureName:'teardownWidget',onSuccess:function(){z(e.name),clearTimeout(t),clearTimeout(i),l.config.callbacks.onAuthTeardown()},onError:function(){z(e.name),clearTimeout(t),clearTimeout(i),l.config.callbacks.onAuthTeardown()},destinationDomain:a,retries:3})},W=function(){s.call({destination:e.widgetWindowReference,publicProcedureName:'resume2FA',onSuccess:function(){l.config.callbacks.onAuthResume2FA&&l.config.callbacks.onAuthResume2FA(!0)},onError:function(){l.config.callbacks.onAuthResume2FA&&l.config.callbacks.onAuthResume2FA(!1)},destinationDomain:a,retries:3})},V=function(){T('getConfig',function(n){return w.push('getConfig'),p=!0,clearTimeout(t),'function'==typeof l.config.callbacks.getConfig&&l.config.callbacks.getConfig(n),x('STOP'),w.indexOf(y[0])>w.indexOf(y[1])?i=setTimeout(function(){m||g||(g=!0,z(e.name),'function'==typeof l.config.callbacks.failed&&l.config.callbacks.failed(n))},l.config.configTimeout):void 0,l.config}),T('widgetFailedToLoad',function(i){w.push('widgetFailedToLoad'),f||(f=!0,clearTimeout(t),z(e.name),'function'==typeof l.config.callbacks.loadFailed&&l.config.callbacks.loadFailed(i))}),T('ready',function(e){w.push('ready'),m=!0,clearTimeout(i),'function'==typeof l.config.callbacks.ready&&l.config.callbacks.ready(e)}),T('configFailed',function(t){w.push('configFailed'),g||(g=!0,clearTimeout(i),z(e.name),'function'==typeof l.config.callbacks.failed&&l.config.callbacks.failed(t))}),T('failed',function(e){w.push('failed'),'function'==typeof l.config.callbacks.failed&&l.config.callbacks.failed(e)}),T('completed',function(e){w.push('completed'),'function'==typeof l.config.callbacks.completed&&l.config.callbacks.completed(e)}),T('exit',function(e){w.push('exit'),'function'==typeof l.config.callbacks.exit&&l.config.callbacks.exit(e)}),T('error',function(e){w.push('error'),'function'==typeof l.config.callbacks.error&&l.config.callbacks.error(e)}),T('log',function(e){w.push('log'),'function'==typeof l.config.callbacks.log&&l.config.callbacks.log(e)})},B=function(){for(var e in b)b.hasOwnProperty(e)&&T(b[e].__key__,b[e].__callback__);K()},K=function(){window.addEventListener('message',function(t){if('undefined'!=typeof t&&'undefined'!=typeof t.data&&'string'==typeof t.data&&-1!==t.data.indexOf(e.nameSpace)){var i=v(t.data),o=t.origin||t.originalEvent.origin;for(var a in b)b.hasOwnProperty(a)&&i&&i.toLowerCase().trim()===b[a].__key__.toLowerCase().trim()&&o===n&&w.push(b[a].__key__)}},!1)};return l.load=_,l.teardown=j,l.resume2FA=W,l.addListener=T,l.getMessageStringLog=s.getMessageStringLog,l.buildIFrame=E,l.clearTimeout=function(){clearTimeout(t),h=!0},l.setLoadTimeout=P,l.reLoadIFrame=function(){z(e.name),E(l.config,e.name),P()},l.addAliasToListener=function(t,i,o){if('undefined'==typeof i||''===i.trim())throw new Error('[listener] is required.');if('undefined'==typeof t||''===t.trim())throw new Error('[alias] is required.');if(i.toLowerCase().trim()===t.toLowerCase().trim())throw new Error('[alias] [listener] names cannot be same.');if('function'!=typeof o)throw new Error('[callback] is required and should be a function.');if(!A[i])A[i]=t;else throw new Error('');window.addEventListener('message',function(o){if('undefined'!=typeof o&&'undefined'!=typeof o.data&&'string'==typeof o.data&&-1!==o.data.indexOf(e.nameSpace)){var a=v(o.data),r=o.origin||o.originalEvent.origin;a&&a.toLowerCase().trim()===t.toLowerCase().trim()&&r===n&&s.call({destination:window,destinationDomain:window.location.origin,publicProcedureName:i,namespace:e.nameSpace,onSuccess:function(){},onError:function(){}})}},!1),T(t,o)},l.destroyIFrame=z,l.closePopup=N,l}(F);E.addListener('complete',function(e){E.config.usePopup&&E.closePopup(),'function'==typeof E.config.callbacks.onAuthSuccess&&E.config.callbacks.onAuthSuccess(e,{iframeId:E.iframeId})});var q=function(e){if(!e)throw new TypeError('Invalid url',e);var t=document.implementation.createHTMLDocument(''),i=t.createElement('a');if(i.href=e,t.body.appendChild(i),':'===i.protocol||!/:/.test(i.href))throw new TypeError('Invalid URL');return i.protocol+'//'+i.host};E.addListener('ready',function(e){'function'==typeof E.config.callbacks.onAuthReady&&E.config.callbacks.onAuthReady(e,{iframeId:E.iframeId});var t=document.getElementById(F.name+'-iFrame');null!==t&&'undefined'!=typeof e.iframeTitle&&''!==e.iframeTitle&&(t.title=e.iframeTitle)}),E.addListener('authFailedToLoad',function(e){var t=E.getMessageStringLog(),i=E.iframeId;E.config.usePopup&&E.closePopup(),'function'==typeof E.config.callbacks.onAuthFailure&&E.config.callbacks.onAuthFailure(e,{logMessage:t,iframeId:i})}),E.addListener('passwordAuthDone',function(e,t){'function'==typeof E.config.callbacks.onPasswordAuthDone&&E.config.callbacks.onPasswordAuthDone(e,t,{iframeId:E.iframeId})}),E.addListener('authError',function(e,t){'function'==typeof E.config.callbacks.onAuthError&&E.config.callbacks.onAuthError(e,t)}),E.addListener('repairDidStart',function(e){'function'==typeof E.config.callbacks.onRepairStart&&E.config.callbacks.onRepairStart(e,{iframeId:E.iframeId})}),E.addListener('authDidCancel',function(e){E.config.usePopup&&E.closePopup(),'function'==typeof E.config.callbacks.onAuthCancel&&E.config.callbacks.onAuthCancel(e,{iframeId:E.iframeId})}),E.addListener('authTeardown',function(e){E.config.usePopup&&E.closePopup(),'function'==typeof E.config.callbacks.onAuthTeardown&&E.config.callbacks.onAuthTeardown(e,{iframeId:E.iframeId})}),E.addListener('authWidgetDidChangeFlow',function(e){'function'==typeof E.config.callbacks.onAuthWidgetDidChangeFlow&&E.config.callbacks.onAuthWidgetDidChangeFlow(e,{iframeId:E.iframeId})}),E.addListener('authWidgetWillChangeFlow',function(e){'function'==typeof E.config.callbacks.onAuthWidgetWillChangeFlow&&E.config.callbacks.onAuthWidgetWillChangeFlow(e,{iframeId:E.iframeId})}),E.addAliasToListener('config','getConfig',function(){return{data:E.config}}),window.addEventListener('message',function(e){var t,i,n,o,a=e.origin||e.originalEvent.origin;if(E.config&&E.config.features&&E.config.serviceURL&&!E.config.onDemand2FAToken&&E.config.features.enableFirstPartyOAuth&&(o=q(E.config.serviceURL),a===o))if('SOAuthorizationDidStart'===e.data)E.clearTimeout(),'function'==typeof E.config.callbacks.onNativeTakeOverDidStart&&E.config.callbacks.onNativeTakeOverDidStart({iframeId:E.iframeId});else if('SOAuthorizationDidCancel'===e.data)'function'==typeof E.config.callbacks.onNativeTakeOverDidCancel&&E.config.callbacks.onNativeTakeOverDidCancel({iframeId:E.iframeId}),E.setLoadTimeout();else if(e.data&&'AppSSOTakeoverDidComplete'===e.data.event){if(E.clearTimeout(),'function'==typeof E.config.callbacks.onNativeTakeOverDidComplete&&E.config.callbacks.onNativeTakeOverDidComplete({iframeId:E.iframeId}),'undefined'==typeof e.data.authorization||'undefined'==typeof e.data.authorization.grant_code)return R.state='fail','function'==typeof E.config.callbacks.onNativeTakeOverError&&E.config.callbacks.onNativeTakeOverError({code:'MISSING_DATA'},{iframeId:E.iframeId}),void E.reLoadIFrame();try{t=atob(e.data.authorization.grant_code)}catch(i){t=e.data.authorization.grant_code}if(R.code=t,e.data.authorization&&(i=e.data.authorization.state),E.config.features&&E.config.features.enableOIDCGrantCode)E.config.callbacks.onAuthSuccess({grantCode:t,state:i},{iframeId:E.iframeId});else{var r={serviceURL:E.config.serviceURL,serviceKey:E.config.serviceKey,code:t,appleOAuth:{requestor:R.appleOAuth.requestor},width:'0',height:'0',iframeId:E.iframeId,containerId:E.config.containerId,state:E.config.state};'undefined'!=typeof E.config.alternateTokenCookie&&''!==E.config.alternateTokenCookie&&(r.alternateTokenCookie=E.config.alternateTokenCookie),'undefined'!=typeof E.config.requestorContext&&'string'==typeof E.config.requestorContext.OAuthClientId&&(r.OAuthClientId=E.config.requestorContext.OAuthClientId),'undefined'!=typeof E.config.requestorContext&&'string'==typeof E.config.requestorContext.OAuthToken&&(r.OAuthToken=E.config.requestorContext.OAuthToken),R.state='code',E.buildIFrame(r,'widget-bridge'),n=setTimeout(function(){R.state='fail',clearTimeout(n),'function'==typeof E.config.callbacks.onNativeTakeOverError&&E.config.callbacks.onNativeTakeOverError({code:'LOAD_TIMEOUT'},{iframeId:E.iframeId}),E.destroyIFrame('widget-bridge'),E.reLoadIFrame()},60000)}}else if(e.data&&e.data.event&&'WidgetBridgeComplete'===e.data.event){var s={};i=e.data.state,clearTimeout(n),i&&(s.state=i),E.config.callbacks.onAuthSuccess(s,{iframeId:E.iframeId})}else e.data&&e.data.event&&'WidgetBridgeFailed'===e.data.event&&(R.state='fail',clearTimeout(n),'function'==typeof E.config.callbacks.onNativeTakeOverError&&E.config.callbacks.onNativeTakeOverError({code:'FAIL_TO_VERIFY_CREDENTIALS'},{iframeId:E.iframeId}),E.destroyIFrame('widget-bridge'),E.reLoadIFrame())});var U=function(e){e.appleOAuth={requestor:{id:e.serviceKey,redirectURI:window.location.origin,responseMode:'web_message',responseType:'code'}},'undefined'!=typeof e.state&&(e.appleOAuth.requestor.state=e.state,R.oauthState=e.appleOAuth.requestor.state),'undefined'!=typeof e.devAppDomain&&''!==e.devAppDomain&&(e.appleOAuth.requestor.redirectURI=e.devAppDomain),R.appleOAuth.requestor=e.appleOAuth.requestor};window.AppleID=window.AppleID||{},window.AppleID.service=window.AppleID.service||{},window.AppleID.service.auth=window.AppleID.service.auth||{},window.AppleID.service.auth.init||(window.AppleID.service.auth.init=function(e){L(),!e.onDemand2FAToken&&e.features&&e.features.enableFirstPartyOAuth&&(R.enableFirstPartyOAuth=!0,U(e)),E.load(e)}),window.AppleID.service.auth.teardown=window.AppleID.service.auth.teardown||E.teardown,window.AppleID.service.auth.resume2FA=window.AppleID.service.auth.resume2FA||E.resume2FA,window.AppleID.service.auth.closePopup=window.AppleID.service.auth.closePopup||E.closePopup;var M={init:E.load,teardown:E.teardown,closePopup:E.closePopup,resume2FA:E.resume2FA},z=t['default']=E.load}]);