(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[140],{FylZ:function(e,t,n){function i(){let e="";for(let t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}n.d(t,"a",(function(){return i}))},JqDr:function(e,t,n){var i=n("gxu6"),o=n("mwIZ"),a=n.n(o),s=n("eOdZ"),r=n("QLqj"),c=n("28DW"),l=n("VL22"),d=n("RNo4"),g=n("OX7c"),u=n("J8m7"),p=n("yM2L");let h=0;const _=(e,t)=>{const n={...e},{onCorsHandshakeHost:o,registerUserContext:b,sendActiveUserPing:m,successWithoutTokenErrorMessage:f}=t,O=r.b.localStorage.getItem("visitedPages"),k=a()(window,["location","search"],null),w=Object(d.k)(k).utm_campaign;O&&(n.visited_pages=JSON.stringify(O)),w&&(n.utm_campaign=w);const S=r.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin");if(S){const e=[];for(const t of S)t.is_shared_pin&&e.push({ts:t.ts,path:t.path,first_pin_image_signature:t.image_signature,is_shared:!0});e&&(n.visited_pages=JSON.stringify(e.concat(O||[])))}n.user_behavior_data=(()=>{const e={};return["signupTriedSkipInputName","signupTriedSkipGender","unauthTopicsFollowed"].forEach(t=>{const n=r.b.localStorage.getItem(t);n&&(e[t]=n)}),JSON.stringify(e)})();const j=e=>(Object(g.a)("signup"),i.c("galae"),i.c("fbalae"),m(),i.b("ujr","1"),((e,{logContextEventType:t,trackRegisterSuccess:n})=>{let i;switch(e.container){case"home_page":i=1750,Object(c.a)("signup_home_page");break;case"mweb_homepage":i=1750,Object(c.a)("signup_mweb_home_page");break;case"plain_signup_modal":i=1751,Object(c.a)("signup_plain_modal");break;case"closeup_signup_modal":i=1752,Object(c.a)("signup_closeup_modal");break;case"widescreen_signup_modal":i=1753,Object(c.a)("signup_widescreen_modal");break;case"pinit_button_landing":i=1755,Object(c.a)("signup_pinit_button_landing");break;case"inspired_banner":Object(c.a)("signup_inspired_banner");break;case"category_jump_banner":Object(c.a)("signup_category_jump_banner");break;case"send_pin_banner":i=1756,Object(c.a)("send_pin_banner");break;default:i=1754,Object(c.a)("signup_unknown_placement")}const o=e.container||"container_unknown";Object(c.a)("signup.container."+o);const a=e.signupSource||"signupSource_unknown";Object(c.a)("signup.source."+a),i&&t(i);const s=document.referrer;let r;r=s?s.indexOf("/t.co/")>-1?"twitter":s.indexOf("google.")>-1?"google":s.indexOf("bing.")>-1?"bing":s.indexOf("facebook.")>-1?"facebook":"other":"direct",Object(c.a)("signup_referrer."+r),n(),Object(c.a)(`web_signup.${Object(l.b)(e)}.success.${e.page||"page_unknown"}.${o}.${r}.${e.hybridTier||"tier_unknown"}`)})(n,t),e),y=e=>{e.api_error_code===u.c&&(Object(c.a)("multi_step_set_age_restrict_cookie"),i.b("r_r","1",87600),i.b("_pinterest_pfob","disabled"));if((!e.api_error_code||[u.g,u.f].includes(e.api_error_code))&&h<3)return Object(c.a)(`unauth_web.signup_retry_error.${String(e.api_error_code)}.${String(n.container)}`),h+=1,_(n,t);throw e};if(!n.facebook_id&&!n.gplus_code&&!n.gplus_id_token&&!n.google_open_id_token&&Boolean(n.email)&&o){Object(c.a)("unauth_cross_domain_register_debugging_counter");const e=e=>{Object(c.a)(`web_cross_domain_register.${e}.${Object(l.b)(n)}`)};return e("attempt"),Object(p.registerUser)(n,b).then(t=>{j(t);const n=t.data||"";if(n)return e("success_with_token"),Object(p.exchangeTokenAndSetSession)(n,!0).then(t=>{e("success_token_exchanged")},t=>{throw e("success_token_not_exchanged"),t});throw e("success_without_token"),new Error(f)},t=>{e("failure"),y(t)})}return s.a.create("UserRegisterResource",n).callCreate().then(e=>j(e),e=>y(e))};t.a=_},OCob:function(e,t,n){var i=n("+NLT");t.a=()=>({referrer:i.a.instance.referrer,facebookToken:i.a.instance.facebook_token,unauthId:i.a.instance.unauth_id,origin:i.a.instance.origin,appType:i.a.instance.app_type})},TbPR:function(e,t,n){n.r(t);var i=n("q1tI"),o=n("/MKj"),a=n("gxu6"),s=n("OCob"),r=n("Ye/N"),c=n("37no"),l=n("kJuv"),d=n("sv3x"),g=n("vjiL"),u=n("s8BS"),p=n("kmwA"),h=n("v/Q4"),_=n("zRck"),b=n("HU+g"),m=n("U4JR"),f=n("EC51"),O=n("28DW"),k=n("n6mq"),w=n("nKUr");function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j extends i.Component{constructor(...e){super(...e),S(this,"state",{animationMinHeight:-1,showRegisterRequestLoading:!1}),S(this,"mountStyle",()=>this.setState({showRegisterRequestLoading:!0})),S(this,"requestAnimationFrameId",null),S(this,"handleLoginButtonClick",({event:e})=>{Object(O.a)(`unauth.google_one_tap.confirmation_dialog.${this.props.loggingId}.login_click`),this.clearDelayedSignupTimeout(),e&&(e.preventDefault(),e.stopPropagation()),this.props.handleLogin()})}componentDidMount(){const e=1e3*this.props.signupDelay;this.delayedSignupTimeoutId=window.setTimeout(()=>{Object(O.a)(`unauth.google_one_tap.confirmation_dialog.${this.props.loggingId}.signup_delay_timer_reached`),this.requestAnimationFrameId=window.requestAnimationFrame(this.mountStyle),this.props.handleSignup()},e)}componentWillUnmount(){this.clearDelayedSignupTimeout(),this.cancelAnimationFrame()}clearDelayedSignupTimeout(){this.delayedSignupTimeoutId&&window.clearTimeout(this.delayedSignupTimeoutId)}cancelAnimationFrame(){this.requestAnimationFrameId&&window.cancelAnimationFrame(this.requestAnimationFrameId)}render(){const{animationMinHeight:e,showRegisterRequestLoading:t}=this.state,n={transitionProperty:"min-height",transitionDuration:"500ms",transitionTimingFunction:"ease-in-out"};if(e>=0){let o=e;t&&(o=0),Object.assign({},n,{minHeight:(i=o,i+"px")})}var i;return Object(w.jsx)("div",{style:n,ref:e=>{!e||this.state.showRegisterRequestLoading||this.state.animationMinHeight>0||this.setState({animationMinHeight:e.clientHeight})},children:Object(w.jsxs)(k.e,{direction:"column",display:"flex",flex:"grow",justifyContent:"center",alignItems:"center",children:[Object(w.jsx)(k.e,{children:Object(w.jsx)(k.Y,{align:"center",weight:"bold",children:Object(w.jsx)("span",{className:"deprecatedTextSizeXL",children:t?r.a._("Finishing up...","Title of a dialog telling the user that an account is almost done being created.","Title of a dialog telling the user that an account is almost done being created."):r.a._("Creating your account...","Title of a dialog telling the user that an account is being created.","Title of a dialog telling the user that an account is being created.")})})}),Object(w.jsx)(k.e,{paddingY:4,children:Object(w.jsx)(k.R,{accessibilityLabel:r.a._("Account is being created","Accessibility label for account creation loading dialog","Accessibility label for account creation loading dialog"),show:!0})}),t?null:Object(w.jsx)(k.e,{marginTop:2,children:Object(w.jsx)(k.Y,{inline:!0,align:"center",children:r.a._("Didn’t mean to create a new account?","Description text telling the user that they can log in if they did not intend to create a new account","Description text telling the user that they can log in if they did not intend to create a new account")})}),t?null:Object(w.jsx)(k.e,{children:Object(w.jsx)(k.Y,{inline:!0,align:"center",children:Object(w.jsx)(f.a,{inline:!0,href:"/login",onClick:this.handleLoginButtonClick,children:r.a._("Click here to log in.","Login button which will show the login modal and enable the user to log in","Login button which will show the login modal and enable the user to log in")})})})]})})}}var y=j,T=n("b7nI"),C=n("WR05"),L=n("pLLR");function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v={modalOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},staticContinueButtonLoginLink:{cursor:"pointer",fontWeight:"normal"}},A="delayedSignupLoadingSpinner",E="staticSignupLogin",I="staticSignupLoginWithTOS";class D extends i.Component{constructor(...e){super(...e),x(this,"handleCancelClick",()=>{this.trackScopedAction("cancel.click"),Object(m.b)(101,{element:73,view:10,viewParameter:3202}),this.props.handleCancelClick()}),x(this,"handleConfirmSignup",()=>{this.trackScopedAction("confirm.click"),Object(m.b)(101,{element:31,view:10,viewParameter:3202}),this.props.handleConfirmSignup(!1)}),x(this,"handleConfirmSignupWithSpinner",()=>{this.trackScopedAction("confirm.click"),Object(m.b)(101,{element:31,view:10,viewParameter:3202}),this.props.handleConfirmSignup(!0)}),x(this,"handleShowLogin",()=>{this.trackScopedAction("login.click"),Object(m.b)(101,{element:30,view:10,viewParameter:3202}),this.props.handleShowLogin()})}componentDidMount(){Object(m.b)(120,{viewParameter:3202}),this.disableBackgroundScrolling(),this.trackScopedAction("shown")}componentWillUnmount(){this.enableBackgroundScrolling()}trackScopedAction(e){Object(O.a)(`unauth.google_one_tap.confirmation_dialog.${this.props.step}.${e}`)}disableBackgroundScrolling(){document.body&&(document.body.style.overflow="hidden")}enableBackgroundScrolling(){document.body&&(document.body.style.overflow="")}renderDelayedSignupConfirmation(e){return Object(w.jsx)(y,{signupDelay:e,handleLogin:this.handleShowLogin,handleSignup:()=>{this.handleConfirmSignup()},loggingId:A})}renderContentInModalContainer(e){const{layoutStyle:t,loading:n}=this.props;return"top"===t?Object(w.jsx)("div",{style:v.modalOverlay,children:Object(w.jsxs)(k.e,{color:"white",direction:"column",display:"flex",margin:6,padding:7,position:"fixed",right:!0,rounding:2,top:!0,width:376,children:[n?Object(w.jsx)(T.a,{}):null,e]})}):Object(w.jsx)("div",{style:v.modalOverlay,children:Object(w.jsxs)(k.e,{bottom:!0,color:"white",direction:"column",display:"flex",height:168,padding:7,position:"fixed",width:"100%",children:[n?Object(w.jsx)(T.a,{}):null,e]})})}renderStaticSignupLoginConfirmation(e){const{country:t}=this.props;return Object(w.jsxs)(k.e,{children:[Object(w.jsx)(k.e,{display:"inlineBlock",position:"absolute",top:!0,right:!0,marginTop:2,marginEnd:2,children:Object(w.jsx)(k.v,{accessibilityLabel:r.a._("Cancel","Button to close the signup/login modal","Button to close the signup/login modal"),icon:"cancel",onClick:this.handleCancelClick,size:"sm"})}),Object(w.jsx)(k.Y,{align:"left",weight:"bold",children:Object(w.jsx)("span",{className:"deprecatedTextSizeXL",children:r.a._("Continue to Pinterest","Title of a dialog telling enabling the user to continue with sign up or log in","Title of a dialog telling enabling the user to continue with sign up or log in")})}),Object(w.jsx)(k.e,{marginTop:2,children:Object(w.jsx)(k.Y,{align:"left",children:r.a._("Hmm, it looks like you don't have an account yet. Let's get started!","Description text of a dialog asking the user to sign up for a Pinterest account","Description text of a dialog asking the user to sign up for a Pinterest account")})}),Object(w.jsx)(k.e,{marginTop:5,children:Object(w.jsx)(k.f,{color:"red",onClick:this.handleConfirmSignupWithSpinner,text:r.a._("Sign up","Text on a button which will create an account when clicked","Text on a button which will create an account when clicked")})}),Object(w.jsx)(k.e,{marginTop:2,children:Object(w.jsx)(k.f,{color:"gray",onClick:this.handleShowLogin,text:r.a._("Log in using a different method","Text on a button which will take the user to login when clicked.","Text on a button which will take the user to login when clicked.")})}),e?Object(w.jsx)(k.e,{marginTop:4,marginStart:4,marginEnd:4,children:Object(w.jsx)(C.a,{country:t,dark:!0})}):null]})}render(){if(this.props.shouldHide)return null;let e=null;return this.props.step===A?e=this.renderDelayedSignupConfirmation(this.props.delayedSignupLoadingSpinnerDuration):this.props.step===E?e=this.renderStaticSignupLoginConfirmation(!1):this.props.step===I&&(e=this.renderStaticSignupLoginConfirmation(!0)),this.renderContentInModalContainer(e)}}function G(e){const t=Object(L.d)(),{country:n}=t;return Object(w.jsx)(D,{...e,country:n})}const R="disableUnauthGoogleOneTap";var N=n("J8m7"),P=n("VL22"),F=n("h7e3"),M=n("4NNh"),U=n("iMWs");function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $ extends i.Component{constructor(e){super(e),H(this,"annotateOneTapStopwatch",e=>Object(F.b)("google_autologin",e)),H(this,"abortOneTapStopwatch",e=>Object(F.a)("google_autologin",e)),H(this,"stopOneTapStopwatch",()=>Object(F.d)("google_autologin")),H(this,"onRetrieveCredentialsSuccess",e=>{const t=e.credential,n=e.select_by;a.b(R,"1",168),this.showLoading(),this.trackGoogleOneTapAction("success");const i={google_open_id_token:t,autologin:"auto"===n},o=i.autologin?"autologin":"login",s=n.includes("btn")?"gsi_btn":n.includes("user")?"onetap_btn":"other";Object(O.e)({action:o,event:"attempt",type:"google_one_tap",trigger:s}),this.login(i).then(e=>{this.onLoginSuccess(e),Object(O.e)({action:o,event:"success",type:"google_one_tap",trigger:s})},e=>{this.onLoginFailure(i,n,e),Object(O.e)({action:o,event:"fail",type:"google_one_tap",trigger:s})}),this.trackSignupLoginEvent(7534)}),H(this,"onLoginSuccess",(e={})=>{const{nextUrl:t}=this.props;this.trackGoogleOneTapAction("login.success"),this.trackSignupLoginEvent(7536),t?d.b.handleRedirect(t):d.b.handleRedirectWithFallbackWindowLocation()}),H(this,"onLoginFailure",(e,t,n)=>{const{handleLoginError:i,handle2FALogin:o}=this.props;this.hideLoading();const a=n&&n.api_error_code||0;if(this.trackGoogleOneTapAction("login.error."+a),this.trackSignupLoginEvent(7535),a===N.v)"btn"===t?(this.setState({googleOpenId:e.google_open_id_token}),this.attemptSignup(!1,!0)):this.showConfirmationDialog(e);else if(a===N.t)o({gplus_id_token:e.google_open_id_token});else if(a===N.x)this.setState({showAccountSuspended:!0});else{const e=r.a._("We couldn’t log you in with that account. Try the Google button!");Object(b.a)(e),i(n)}}),H(this,"onSignupSuccess",(e,t)=>{this.trackGoogleOneTapAction("signup.success"),this.trackSignupLoginEvent(7487),Object(O.e)({action:"signup",event:"success",type:"google_one_tap",trigger:e}),d.b.handleSignupRedirect("/")}),H(this,"onSignupFailure",(e,t)=>{const n=t&&t.api_error_code||0;this.trackGoogleOneTapAction("signup.error."+n),Object(O.e)({action:"signup",event:"fail",type:"google_one_tap",trigger:e}),this.trackSignupLoginEvent(7488),this.hideLoading(),this.hideConfirmationDialog();const i=r.a._("We couldn’t sign you up with that account. Try the Google button!");Object(b.a)(i),this.props.handleSignupError()}),H(this,"trackGoogleOneTapAction",e=>{Object(O.g)("unauth.google_one_tap."+e)}),H(this,"handleCancelOneTap",()=>{this.hideConfirmationDialog()}),H(this,"attemptSignup",(e,t)=>{const{handleSignupConfirmed:n,pageContext:i,requestContext:o}=this.props;e&&this.showLoading();const{googleOpenId:a}=this.state,s=Object(M.b)(a),r={google_open_id_token:a,first_name:s.given_name,last_name:s.family_name,image_url:s.picture,container:_.g,hybridTier:null==i?void 0:i.hybridTier,page:null==i?void 0:i.pageType};if(n&&Object(P.d)(o.country))return void n(P.a.GOOGLE_ONE_TAP,{},r);const c=t?"onetap_btn":"gsi_btn";Object(O.e)({action:"signup",event:"attempt",type:"google_one_tap",trigger:c}),Object(g.a)(r).then(e=>{this.onSignupSuccess(c,e)},e=>{this.onSignupFailure(c,e)}),this.trackSignupLoginEvent(7537)}),H(this,"renderGoogleConfirmationDialog",(e,t)=>Object(w.jsx)(G,{delayedSignupLoadingSpinnerDuration:2,handleCancelClick:this.handleCancelOneTap,handleConfirmSignup:this.attemptSignup,handleShowLogin:this.props.handleShowLogin,layoutStyle:e,loading:this.state.loading,shouldHide:this.props.shouldHide,step:t})),this.state={confirmationDialogStep:void 0,googleOpenId:"",loading:!1,showAccountSuspended:!1}}componentDidMount(){const{pageContext:e,requestContext:t}=this.props;"1"!==a.a(R)&&!a.a("fba")||!t.isBot&&a.a("fba")?(this.setupGoogleOneTap(),t.isBot||Object(O.g)(`unauth_web_container.${_.g}.${String(null==e?void 0:e.hybridTier)}.other.shown`)):this.abortOneTapStopwatch("disabled")}componentDidUpdate(e){this.props.shouldHide&&!e.shouldHide&&this.hide()}initializeGoogleOneTap(){this.trackGoogleOneTapAction("sdk_exists");const e=window.google.accounts.id;e.initialize({client_id:p.a.settings.GPLUS_CLIENT_ID,auto_select:!a.a("fba"),callback:this.handleOneTapResponse.bind(this),cancel_on_tap_outside:!1,context:"use",activity_listener:this.handleActivity.bind(this)}),this.props.dispatch({type:"GOOGLE_ONE_TAP_INITIALIZED",payload:{}}),this.trackGoogleOneTapAction("initialize"),e.prompt(this.handleMomentNotification.bind(this))}getGoogleId(){if("undefined"==typeof window)return null;const e=window.google;return e&&e.accounts&&e.accounts.id}setupGoogleOneTap(){const{requestContext:{experiments:e}}=this.props,t=(e.v2ActivateExperiment("web_cancelable_google_autologin")||"").startsWith("enabled");this.annotateOneTapStopwatch("beforeLoadOneTapScript"),Object(O.g)("web_unauth.gsi_script.start_dynamic_loading"),e.flush(),Object(c.b)(`${M.a}${t?"?feature=cancelableAutoSelect":""}`).then(()=>{this.annotateOneTapStopwatch("afterLoadOneTapScript"),this.trackGoogleOneTapAction("gsi_script_loaded");const e=window.google;e&&e.accounts&&e.accounts.id?this.initializeGoogleOneTap():this.abortOneTapStopwatch("noAccountFound")})}handleMomentNotification(e){const t=e.getMomentType();if("display"===t){e.isDisplayed()?this.trackGoogleOneTapAction("display_moment.displayed"):this.trackGoogleOneTapAction("display_moment.not_displayed."+e.getNotDisplayedReason())}else"skipped"===t?this.trackGoogleOneTapAction("skipped_moment."+e.getSkippedReason()):"dismissed"===t&&this.trackGoogleOneTapAction("dismissed_moment."+e.getDismissedReason())}handleOneTapResponse(e){if(e){this.stopOneTapStopwatch();const t=e.select_by;this.trackGoogleOneTapAction("select_by."+t),this.onRetrieveCredentialsSuccess(e)}else this.abortOneTapStopwatch("noResponse")}handleActivity(e){if(e){if("error"===e.type)return this.trackGoogleOneTapAction("error."+e.errorType),this.handleEmptyCredentials(),void this.props.dispatch({type:"GOOGLE_ONE_TAP_FAILED",payload:{}});const t="ui_change"===e.type?e.uiActivityType:e.userActivityType;this.trackGoogleOneTapAction(`activity.${e.type}.${t}`),"close_prompt"===t&&this.handleEmptyCredentials()}}handleEmptyCredentials(){this.props.handleEmptyCredentials&&this.props.handleEmptyCredentials()}hide(){this.hideConfirmationDialog()}trackSignupLoginEvent(e){const{viewer:t}=this.props;t.isAuth?Object(m.b)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:4}):Object(m.b)(e,{signup_login_method:4})}login(e){const{pageContext:t}=this.props,n={container:_.g,hybridTier:null==t?void 0:t.hybridTier,page:null==t?void 0:t.pageType};return Object(l.a)(e,Object(s.a)(),n)}showConfirmationDialog(e){const{container:t}=this.props;let n;n="InspiredWallSignup"===t?E:"login_page"===t?I:e.autologin?E:A,this.setState({googleOpenId:e.google_open_id_token,confirmationDialogStep:n})}hideConfirmationDialog(){this.setState({confirmationDialogStep:void 0})}showLoading(){this.setState({loading:!0})}hideLoading(){this.setState({loading:!1})}render(){const{requestContext:e}=this.props,{showAccountSuspended:t}=this.state;if(e.isBot)return null;if(t)return Object(w.jsx)(u.a,{onClose:()=>this.setState({showAccountSuspended:!1})});const{confirmationDialogStep:n}=this.state;if(n){const e="top";return this.renderGoogleConfirmationDialog(e,n)}return null}}var W=Object(U.c)((function(e){return Object(w.jsx)($,{...e,dispatch:Object(o.useDispatch)(),requestContext:Object(L.d)(),viewer:Object(h.a)()})}));function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class q extends i.Component{constructor(...e){super(...e),B(this,"state",{showGoogleOneTap:!0}),B(this,"hide",()=>{this.setState({showGoogleOneTap:!1})}),B(this,"reportFailureToShow",()=>{this.props.handleFailureToShow&&this.props.handleFailureToShow()})}render(){const{showGoogleOneTap:e}=this.state,{container:t,handleSignupConfirmed:n,handleLoginError:i,handleLoginWithMfa:o,handleSignupError:a,handleShowLogin:s,nextUrl:r,shouldHide:c}=this.props;return e?Object(w.jsx)(W,{container:t,handleEmptyCredentials:this.hide,handle2FALogin:e=>{this.hide(),o(e)},handleLoginError:e=>{this.hide(),i(e)},handleSignupConfirmed:(e,t,i)=>{this.hide(),n&&n(e,t,i)},handleSignupError:()=>{this.hide(),a()},handleShowLogin:()=>{this.hide(),s()},nextUrl:r,reportFailureToShow:this.reportFailureToShow,shouldHide:c}):null}}B(q,"defaultProps",{container:"unknown",shouldHide:!1});t.default=q},VL22:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return r}));var i=n("kmwA");const o={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",LINE:"line",EMAIL:"email",OTHER:"other"},a=e=>e.facebook_id?o.FACEBOOK:e.google_open_id_token?o.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?o.GOOGLE:e.line_id_token?o.LINE:e.email?o.EMAIL:o.OTHER,s=(e="")=>e in i.a.settings.MINIMUM_AGE_BY_EU_COUNTRY,r=e=>i.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)||i.a.settings.LATAM_AGE_COLLECTION.has(e)},h7e3:function(e,t,n){n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return b}));var i=n("3R0Q"),o=n("EHyI"),a=n("SyXB"),s=n("FylZ"),r=n("mRg4"),c=n("XtwW"),l=n("fZG9"),d=n("3/Bf");const g={},u=(e,t)=>{t.forEach(t=>{g[t]=(({name:e,pwtStaticContext:t})=>{if(!c.a||!Object(o.a)())return null;const n={type:"stopwatch",name:e},a=[];let d=!0;return{abort:e=>{d&&(d=!1,Object(r.a)({metricId:n,pwtStaticContext:t,result:{type:"ABORT",reason:e}}))},annotate:e=>{d&&a.push({label:e,timestamp:c.a.now()})},stop:()=>{if(!d)return;d=!1;const e={type:"COMPLETE",traceId:Object(s.a)(),startTime:0,endTime:c.a.now(),spans:[],annotationMap:Object(i.a)(a),binaryAnnotationMap:Object(l.a)({metricId:n,pwtStaticContext:t})};Object(r.a)({metricId:n,pwtStaticContext:t,result:e})}}})({name:t,pwtStaticContext:e})})},p=e=>g[e],h=(e,t)=>{const n=p(e);if(n)try{n.abort(t)}catch(i){Object(d.b)("app_load_stopwatch_error",{name:e,result:"abort"})}},_=(e,t)=>{const n=p(e);n&&(n.annotate(t),Object(a.c)(`stopwatch_${e}_${t}`))},b=e=>{const t=p(e);if(t)try{t.stop()}catch(n){Object(d.b)("app_load_stopwatch_error",{name:e,result:"complete"})}}},vjiL:function(e,t,n){var i=n("+NLT"),o=n("m2Wt"),a=n("h4v/");var s=n("zpPL");var r=n("Jr++"),c=n("Ye/N"),l=n("eqAH"),d=n("kmwA"),g=n("28DW"),u=n("JqDr");t.a=e=>{const{facebook_token:t,invite_code:n,locale:p,origin:h,referrer:_,unauth_id:b,user_agent_platform:m}=i.a.instance,f={logContextEventType:e=>{a.a.getInstance().addEvent(o.a.fromEventType(e))},sendActiveUserPing:l.a,registerUserContext:{facebookToken:t,inviteCode:n,locale:p,referrer:_,unauthId:b},onCorsHandshakeHost:d.a.settings.CORS_HANDSHAKE_DOMAINS.includes(h),successWithoutTokenErrorMessage:c.a._("We were able to create your account, but there was a problem logging you in. Try refreshing the page to continue."),trackRegisterSuccess:()=>{Object(g.a)("signup_referrer_module."+String(Object(r.a)().referrer||function(){const e=s.a.instance.getState().ui.mainComponent.initial;return e?e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase():null}())),"ios"===m?Object(g.a)("signup_mweb.iphone_web"):"ipad"===m?Object(g.a)("signup_mweb.ipad_web"):"android"===m&&Object(g.a)("signup_mweb.android_web")}};return Object(u.a)(e,f)}},yM2L:function(e,t,n){n.r(t),n.d(t,"exchangeTokenAndSetSession",(function(){return d})),n.d(t,"verifyLoggedInStatus",(function(){return g})),n.d(t,"registerUser",(function(){return u})),n.d(t,"loginUser",(function(){return p}));var i=n("T0g9"),o=n("eOdZ"),a=n("kmwA"),s=n("28DW"),r=n("J8m7");const c=a.a.settings.ACCOUNTS_PINTEREST_URL,l=(e,t,n,i)=>{const o=e=>{const t=new Error(e.statusText);throw t.response=e,!t.api_error_code&&t.response&&(t.api_error_code=t.response.code,t.message=t.response.message),t},a={credentials:"include",mode:"cors"};return"POST"===n&&(a.method="POST",a.body=t,a.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":i},i||Object(s.a)("unauth.auth_handshake.cross_domain.no_unauth_id."+n)),fetch(e,a).then(e=>200===e.status||401===e.status||409===e.status?e:(o(e),{})).then(e=>e.json()).then(e=>"success"===e.status?Promise.resolve(e):e.code===r.t?(e.api_error_code=e.code,Promise.reject(e)):(o(e),{})).catch(e=>{throw e})},d=(e,t=!1)=>o.a.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate(),g=e=>{l(c+"/v3/handshake/verify/","","GET",e).then(e=>{if(e&&e.data){const t=e.data;d(t).then(e=>{window.location.reload()},e=>{})}},e=>{})},u=(e,{facebookToken:t,inviteCode:n,locale:o,referrer:s,unauthId:r})=>{const c=(e.business_name?"partner/handshake":(e.gplus_code||e.gplus_id_token)&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"email/handshake",d={};if(d.email=e.email||"",d.username=e.username||"",d.password=e.password||"",d.first_name=e.first_name||"",d.last_name=e.last_name||"",d.country=e.country||"",d.locale=o,d.referrer=s,e.age){const t=new Date;t.setFullYear(t.getFullYear()-e.age);const n=parseInt(t/1e3,10);d.birthday=n.toString()}if(e.custom_gender&&(d.custom_gender=e.custom_gender),e.gender&&(d.gender=e.gender),e.business_name&&(d.account_type=e.account_type,d.business_name=e.business_name,d.first_name=e.business_name),n&&(d.invite_code=n),e.facebook_id){const n=t||e.facebook_token||"";d.facebook_id=e.facebook_id,d.facebook_token=n,d.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(d.password=e.password||"",d.one_time_code=e.gplus_code,d.id_token=e.gplus_id_token,d.redirect_uri=e.gplus_redirect_uri);return e.recaptchaV3Token&&(d.recaptcha_v3_token=e.recaptchaV3Token),l(`${a.a.settings.ACCOUNTS_PINTEREST_URL}/v3/register/${c}/`,Object(i.a)(d),"POST",r)},p=(e,{facebookToken:t,recaptchaV3Token:n,referrer:o,unauthId:s})=>{const r=(e.mfa_token?"mfa/handshake":e.gplus_id_token&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"handshake",c={};if(e.username_or_email&&(c.username_or_email=e.username_or_email.trim(),c.password=e.password,c.referrer=o),e.facebook_id){const n=t||e.facebook_token||"";c.facebook_id=e.facebook_id,c.facebook_token=n,c.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(c.gplus_id_token=e.gplus_id_token,c.gplus_access_token=e.gplus_access_token,c.gplus_expires_at=e.gplus_expires_at,c.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(c.mfa_token=e.mfa_token),n&&(c.token=n),l(`${a.a.settings.ACCOUNTS_PINTEREST_URL}/v3/login/${r}/`,Object(i.a)(c),"POST",s)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/140-493b600b7c9617014b20.mjs.map