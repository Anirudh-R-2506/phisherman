define("modules/clean/form",["require","exports","tslib","dompurify","jquery","modules/clean/ajax","modules/core/cookies","modules/core/exception","modules/core/i18n"],(function(e,t,r,a,s,n,o,i,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post_request=t.add_vars=t.parse_error=t.parse_response=t.collect_data=t.submit=void 0,a=r.__importStar(a),s=r.__importDefault(s),n=r.__importStar(n);var l=u.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."});function p(e){for(var t={},r=0,a=Array.from(e.find("input, select, textarea"));r<a.length;r++){var n=a[r],o=s.default(n).attr("name");if(o){var i=void 0;if("checkbox"===s.default(n).attr("type"))i=s.default(n).prop("checked")?"True":"";else if("radio"===s.default(n).attr("type")){if(!s.default(n).prop("checked"))continue;i=s.default(n).val()}else i=s.default(n).val();o in t?("string"==typeof t[o]&&(t[o]=[t[o]]),t[o].push(i)):t[o]=i}}return t}function d(e){if(0!==e.indexOf("err:"))return[!0,e];var t=e.substr(4);try{return[!1,JSON.parse(t)]}catch(e){return[!1,t||l]}}function f(e,t,r){return void 0===r&&(r=!1),(function(){for(var n=[],o=0,i=Object.keys(t||{});o<i.length;o++){var u=i[o],l=s.default("<input>",{type:"hidden",name:u});l.val(t[u]);var p=a.sanitize(l.prop("outerHTML"));!0===r&&s.default("input[name='"+u+"']").remove(),n.push(e.append(p))}return n})()}t.submit=function(e,t,r,a){return n.FormWebRequest({url:e.attr("action"),data:p(e),skipErrorHandling:!0,success:function(e,a,s){var n=Array.from(d(s.responseText)),o=n[0],i=n[1];return o?t(i):r(i)},error:function(e,t,a){return r(l)},complete:a})},t.collect_data=p,t.parse_response=d,t.parse_error=function(e){if("string"==typeof e)return[!0,e];if("object"==typeof e)for(var t in e){var r=e[t];if("message_text"in r)return[!0,r.message_text]}return[!1,l]},t.add_vars=f,t.post_request=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={}),i.assert(null!=e,"post_request missing action");var n=s.default("<form>",{action:e,method:"POST",target:r.target?r.target:void 0});t.t=o.Cookies.read("__Host-js_csrf"),f(n,t);var u=s.default(a.sanitize(n.prop("outerHTML")));return s.default("body").append(u),u.submit()}})),define("modules/clean/react/input",["require","exports","tslib","classnames","create-react-class","react","react-dom","react-dom-factories","prop-types","lodash","jquery","modules/clean/keycode","modules/clean/react/form_error_mixin","modules/clean/react/sprite","modules/core/cancelable_promise","modules/core/i18n"],(function(e,t,r,a,s,n,o,i,u,l,p,d,f,c,h,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textarea=t.text=t.password=t.password_strength_meter=void 0,a=r.__importDefault(a),s=r.__importDefault(s),n=r.__importDefault(n),o=r.__importStar(o),i=r.__importDefault(i),u=r.__importDefault(u),l=r.__importStar(l),p=r.__importDefault(p),f=r.__importDefault(f);var v=n.default.createElement;function _(e,t){void 0===t&&(t=!1);var r=function(t){if(e>=t)return"password-input-dot-selected"},a="password-input-meter";t&&(a="password-input-meter-standalone");var s=i.default.div({className:a,ref:"meter"},i.default.div({className:"password-input-dot "+r(4)}),i.default.div({className:"password-input-dot "+r(3)}),i.default.div({className:"password-input-dot "+r(2)}),i.default.div({className:"password-input-dot "+r(1)}));return t?i.default.span({className:"standalone-password-meter-container"},s):s}t.password_strength_meter=_;var g=function(t,n){return s.default({displayName:t+"."+n,propTypes:{expandable:u.default.bool,expandedWidthOffset:u.default.number,animationCurve:u.default.string,animationDuration:u.default.number,onCloseClick:u.default.func,defaultValue:u.default.string,value:u.default.string,autofocus:u.default.bool,autoresize:u.default.bool,inline:u.default.bool,className:u.default.string,valueLink:u.default.object,variant:u.default.string,id:u.default.string,label:u.default.string,afterRender:u.default.func,onClick:u.default.func,onFocus:u.default.func,onBlur:u.default.func,onKeyDown:u.default.func,onChange:u.default.func,compatiblePlaceholder:u.default.bool,placeholder:u.default.string,measureStrength:u.default.bool,error:u.default.shape({message_text:u.default.string,message_html:u.default.string}),closeOnBlur:u.default.bool},mixins:[f.default],getDefaultProps:function(){return{errorWrapperClassName:"text-input-error-wrapper",expandedWidthOffset:90,expandable:!1,animationCurve:"easeOutSine",animationDuration:300,compatiblePlaceholder:!1}},getInitialState:function(){return{inputWidth:0,expanded:!1,value:this.props.defaultValue}},zxcvbnPromise:void 0,componentWillMount:function(){var t=this;this.props.measureStrength&&(this.zxcvbnPromise=h.makeCancelable(new Promise((function(t,r){e(["zxcvbn"],t,r)})).then(r.__importStar)),this.zxcvbnPromise.then((function(e){var r=e.default;t.setState({zxcvbn:r})})))},componentWillUnmount:function(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()},componentDidMount:function(){this._renderFinished();var e=o.findDOMNode(this.refs.inputComponent).offsetWidth;return this.setState({inputWidth:e})},componentDidUpdate:function(){return this._renderFinished()},render:function(){var e={"text-input-input":!0,autofocus:this.props.autofocus,"password-input":"password"===n},r={"text-input":!0,"text-input-expandable":this.props.expandable,"text-input-inline":this.props.inline,"textarea-input":"textarea"===t};if(r[this.props.variant||"standard"]=!0,null!=this.props.className)for(var s=0,o=Array.from(this.props.className.split(/\s/));s<o.length;s++){r[o[s]]=!0}var u=this.renderErrorIfEnabled(),p=void 0;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(p=this.state.errorWrapperIdName);var d=l.omit(this.props,"expandable","expandedWidthOffset","animationCurve","animationDuration","onCloseClick","defaultValue","value","autofocus","autoresize","inline","className","valueLink","variant","id","name","label","afterRender","onClick","onFocus","onBlur","onKeyDown","onChange","compatiblePlaceholder","placeholder","measureStrength","error","error-after","disable-errors","errorWrapperClassName","closeOnBlur"),f=i.default[t](l.assignIn({id:this.props.id,name:this.props.name,"aria-describedby":p,className:a.default(e),type:n,value:this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value,onChange:this.onChangeInternal,onFocus:this.onFocusInternal,onBlur:this.onBlurInternal,onKeyDown:this.onKeyDownInternal,autoFocus:this.props.autofocus,ref:"inputComponent",placeholder:this.props.placeholder||""},d));return i.default.div({className:a.default(r)},this.props["error-after"]?void 0:u,i.default.div({className:"text-input-wrapper"},this._renderPasswordStrengthBar(),f,this.props.expandable?i.default.a({href:"#",onClick:this.onCloseClick,ref:"closeButton",className:"close-button u-mar-left-xs"},v(c.Sprite,{group:"web",name:"xclose",alt:m.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})})):void 0,this.props.label&&!(this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value)?i.default.label({htmlFor:this.props.id},this.props.label):void 0),this.props["error-after"]?u:void 0)},getValue:function(){return o.findDOMNode(this.refs.inputComponent).value},setValue:function(e){return o.findDOMNode(this.refs.inputComponent).value=e,this.setState({value:e})},resizeComponent:function(){var e=o.findDOMNode(this.refs.inputComponent),t=p.default(e);return t.css("height","1px"),t.css("height",e.scrollHeight+"px")},_renderPasswordStrengthBar:function(){return this.props.measureStrength?_(this.state.score):null},_renderFinished:function(){return this.props.autoresize&&this.resizeComponent(),"function"==typeof this.props.afterRender?this.props.afterRender():void 0},onCloseClick:function(e){if(null!=e&&e.preventDefault(),this.props.expandable){var t=p.default(o.findDOMNode(this.refs.closeButton)),r=p.default(o.findDOMNode(this.refs.inputComponent));return t.stop().animate({opacity:0},this.props.animationDuration),r.stop().animate({width:this.state.inputWidth},this.props.animationDuration,this.props.animationCurve),"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e),this.setState({expanded:!1})}"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e)},onChangeInternal:function(e){if("function"==typeof this.props.onChange&&this.props.onChange(e),null!=this.props.value||(this.props.valueLink?this.props.valueLink.requestChange(e.target.value):this.setState({value:e.target.value})),this.props.measureStrength){var t=void 0;return t=this.state.zxcvbn&&e.target.value?Math.max(1,this.state.zxcvbn(e.target.value).score):0,this.setState({score:t})}},onFocusInternal:function(e){var t=this;if("function"==typeof this.props.onFocus&&this.props.onFocus(e),!1!==this.props.expandable){var r=p.default(e.target),a=p.default(o.findDOMNode(this.refs.closeButton)),s=this.state.inputWidth;0===s&&(s=o.findDOMNode(this.refs.inputComponent).offsetWidth,this.setState({inputWidth:s}));var n=s+this.props.expandedWidthOffset,i=n-parseInt(r.css("padding-right"))+a.width()/2;return a.css({left:i}),r.stop().animate({width:n},this.props.animationDuration,this.props.animationCurve,(function(){return a.stop().animate({opacity:1},t.props.animationDuration)})),this.setState({expanded:!0})}},onBlurInternal:function(e){var t=e.target.value;return!0===this.props.closeOnBlur&&0===t.length&&this.onCloseClick(),"function"==typeof this.props.onBlur?this.props.onBlur(e):void 0},onKeyDownInternal:function(e){if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),null!=this.state.expanded!=!1)switch(e.keyCode){case d.KeyCode.ESC:return e.target.blur(),this.onCloseClick()}}})};t.password=g("input","password"),t.text=g("input","text"),t.textarea=g("textarea","text")})),define("modules/clean/react/form_error_mixin",["require","exports","tslib","react-dom-factories","prop-types","lodash"],(function(e,t,r,a,s,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),s=r.__importDefault(s),n=r.__importStar(n),o={propTypes:{errorWrapperClassName:s.default.string,errorWrapperIdName:s.default.string,"disable-errors":s.default.bool,"error-after":s.default.bool,error:s.default.shape({message_text:s.default.string,message_html:s.default.string})},getInitialState:function(){return{errorWrapperIdName:this.props.errorWrapperIdName?this.props.errorWrapperIdName:n.uniqueId("error-message")}},renderErrorIfEnabled:function(){if(!this.props["disable-errors"])return this.renderError()},renderError:function(){return null!=(null!=this.props.error?this.props.error.message_html:void 0)?a.default.div({id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName,dangerouslySetInnerHTML:{__html:this.props.error.message_html}}):a.default.div({id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName},null!=this.props.error?this.props.error.message_text:void 0)}},t.default=o})),define("prod_assets_web_modules/react-addons-linked-state-mixin",(function(){"use strict";function e(e,t){this.value=e,this.requestChange=t}var t={createStateSetter:function(e,t){return function(r,a,s,n,o,i){var u=t.call(e,r,a,s,n,o,i);u&&e.setState(u)}},createStateKeySetter:function(e,t){var r=e.__keySetters||(e.__keySetters={});return r[t]||(r[t]=(function(e,t){var r={};return function(a){r[t]=a,e.setState(r)}})(e,t))}};return t.Mixin={createStateSetter:function(e){return t.createStateSetter(this,e)},createStateKeySetter:function(e){return t.createStateKeySetter(this,e)}},{linkState:function(r){return new e(this.state[r],t.createStateKeySetter(this,r))}}}));
//# sourceMappingURL=pkg-coreui-forms.min.js-vfl2XHOiQ.map