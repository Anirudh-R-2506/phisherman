define(["require","exports","tslib","classnames","react","modules/core/browser_detection","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/captcha","modules/clean/auth/login/login_error","modules/clean/auth/login/google_login_button","modules/clean/auth/login/apple_login_button","modules/clean/auth/login/types","modules/clean/react/image","modules/clean/react/sprite_div","modules/clean/static_urls","modules/clean/react/file_viewer/conversions/conversion_utils"],(function(e,t,s,a,o,r,i,l,n,p,d,m,u,c,h,g,f,b,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginCredentialsForm=void 0,a=s.__importDefault(a),o=s.__importDefault(o),f=s.__importDefault(f);var _=function(e){var t="/forgot",s=e.target;return e.appendEmail&&(t="/forgot?email_from_login="+e.email,s=void 0),o.default.createElement("a",{className:"forgot-password-link",href:t,target:s},e.text||i.intl.formatMessage({id:"ovBgtz",defaultMessage:"Forgot your password?"}))},N=function(e){return o.default.createElement("div",{id:"navisite"},o.default.createElement("br",null),o.default.createElement("a",{href:"/navi_redirect/login",target:e.openLinkInNewTab?"_blank":void 0},i.intl.formatMessage({id:"vnuqfB",defaultMessage:"Dropbox NAVI"})))},S=function(e){return o.default.createElement("div",{className:"sso-optout"},i.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})," ",o.default.createElement("a",{href:"#",onClick:e.onClick},i.intl.formatMessage({id:"fRMS5E",defaultMessage:"Log in with Dropbox credentials"})))},C=function(){return o.default.createElement("span",{className:"login-loading-indicator ajax-loading"},o.default.createElement(g.Image,{src:b.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:b.static_url("/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif")}))},v=function(){return o.default.createElement("div",{className:"sso-description"},o.default.createElement(f.default,{group:"web",name:"lock",text:i.intl.formatMessage({id:"WH73xS",defaultMessage:"Single sign-on enabled"})}))},M=function(e){return o.default.createElement("div",{className:"credentials-form__fields"},o.default.createElement(n.AuthTextField,{value:e.emailValue,className:a.default("login-text-input","login-email",e.emailProps.className),onChange:e.onInputChange,disabled:e.disabled||e.emailProps.readonly||!1,label:e.emailProps.label||(e.maestroStyle?i.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}):void 0),placeholder:e.emailProps.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"mx5U0y",defaultMessage:"you@mail.com"}):i.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"})),error:e.emailError,maestroStyle:e.maestroStyle,name:"login_email",type:p.AuthTextInputType.EMAIL,variant:e.variant}),e.ssoState===h.SsoState.OFF&&o.default.createElement(n.AuthTextField,{value:e.passwordValue,placeholder:e.passwordProps.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"klwYHA",defaultMessage:"Minimum 6 characters"}):i.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"login_password",className:a.default("login-text-input","login-password",e.passwordProps.className),error:e.passwordError,inputClassName:"password-input",onChange:e.onInputChange,measureStrength:!1,label:e.passwordProps.label||(e.maestroStyle?i.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),maestroStyle:e.maestroStyle,disabled:e.disabled,variant:e.variant,type:p.AuthTextInputType.PASSWORD}))},L=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setCaptchaComponent=function(e){t.captchaComponent=e},t.getCaptchaResponses=function(){return t.props.supportsCaptcha?d.get_captcha_responses(t.captchaComponent):{}},t.handleCaptchaErrors=function(e){return!!t.props.supportsCaptcha&&d.handle_captcha_errors(t.captchaComponent,e)},t.submitRecaptcha=function(){t.props.supportsCaptcha?t.captchaComponent.getWrappedComponent().submit():t.props.onSubmit()},t}return s.__extends(t,e),t.prototype.render=function(){var e,t,s=this.props.rememberMeProps||{},n=this.props.googleLoginProps,g=this.props.appleLoginProps,f=a.default({clearfix:!this.props.hideRememberMe||!this.props.hideHelp&&r.is_supported_mobile_browser()}),b=this.props.openLinksInNewTab?"_blank":void 0,L=a.default("clearfix","credentials-form","login-form",{"sso-required":this.props.ssoState!==h.SsoState.OFF,"sso-optional":this.props.ssoState===h.SsoState.OPTIONAL}),P=n&&n.positionBelow,I=n&&!n.positionBelow,O=g&&g.positionBelow,w=g&&!g.positionBelow,x=P||O,y=I||w,F=n?o.default.createElement(u.GoogleLoginButton,{buttonProps:n.buttonProps,disabled:this.props.isSubmitting,error:this.props.googleLoginError,onClick:this.props.onGoogleLoginClick,variant:this.props.variant}):null,T=g?o.default.createElement(c.AppleLoginButton,{buttonProps:g.buttonProps,disabled:this.props.isSubmitting,error:this.props.appleLoginError,onClick:this.props.onAppleLoginClick}):null,k=this.props.hideHelp||this.props.ssoState===h.SsoState.REQUIRED?null:o.default.createElement(_,{email:this.props.emailValue,target:b,appendEmail:void 0===this.props.forgotPasswordProps.appendEmail||this.props.forgotPasswordProps.appendEmail,text:this.props.forgotPasswordProps.text}),B=o.default.createElement("button",{className:a.default("login-button","signin-button","button-primary",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled},this.props.ssoState===h.SsoState.OFF&&o.default.createElement("div",{className:"signin-text"},this.props.loginButtonProps.text||i.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"})),this.props.ssoState!==h.SsoState.OFF&&o.default.createElement("div",{className:"sso-text"},i.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}))),W=o.default.createElement("div",{className:"hr-label"},o.default.createElement("span",{className:"hr-label__text"},i.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),A=this.props.variant===p.AuthFormVariant.PAPER_COMPACT,R=E.shouldShowSimplifiedModal(),V=this.props.isPaperLogin;return(function(e){e[e.INLINE_WITH_LOGIN_BUTTON=0]="INLINE_WITH_LOGIN_BUTTON",e[e.ON_NEW_LINE=1]="ON_NEW_LINE",e[e.BELOW_FORM=2]="BELOW_FORM"})(e||(e={})),x||A?V&&!A?t=e.BELOW_FORM:A||R?t=e.INLINE_WITH_LOGIN_BUTTON:!x||A||R||(t=e.BELOW_FORM):t=e.ON_NEW_LINE,o.default.createElement("div",{className:"login-form-container--subcontainer"},I&&F,w&&T,y&&!this.props.hideCredentialFields&&W,o.default.createElement("form",{className:L,onSubmit:this.props.onLoginClick,method:"POST"},!this.props.hideCredentialFields&&o.default.createElement(M,{disabled:this.props.disabled,emailError:this.props.emailError,emailProps:this.props.emailProps,emailValue:this.props.emailValue,maestroStyle:this.props.maestroStyle,onInputChange:this.props.onInputChange,passwordError:this.props.passwordError,passwordProps:this.props.passwordProps,passwordValue:this.props.passwordValue,ssoState:this.props.ssoState,variant:this.props.variant}),this.props.loginError&&o.default.createElement(m.LoginError,{message:this.props.loginError}),this.props.supportsCaptcha&&!R&&o.default.createElement(d.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,source:"LOGIN"}),o.default.createElement("div",{className:f},this.props.ssoState!==h.SsoState.OFF&&o.default.createElement(v,null),!this.props.hideRememberMe&&o.default.createElement(l.AuthCheckbox,{checked:this.props.rememberMeValue,className:"remember-me",disabled:s.disabled||this.props.disabled,inline:void 0===s.inline||s.inline,label:s.label||i.intl.formatMessage({id:"ztezCK",defaultMessage:"Remember me"}),maestroStyle:this.props.maestroStyle,name:"remember_me",onChange:this.props.onInputChange,variant:this.props.variant}),t===e.INLINE_WITH_LOGIN_BUTTON&&k,!A&&!this.props.hideCredentialFields&&B,this.props.isSubmitting&&o.default.createElement(C,null),this.props.ssoState===h.SsoState.OPTIONAL&&o.default.createElement(S,{onClick:this.props.onSsoChangeClick}),t===e.ON_NEW_LINE&&o.default.createElement("div",{className:"login-need-help"},k),this.props.showNaviSiteLogin&&o.default.createElement(N,{openLinkInNewTab:this.props.openLinksInNewTab}),A&&B)),x&&!this.props.hideCredentialFields&&!R&&W,P&&F,O&&T,t===e.BELOW_FORM&&o.default.createElement("div",{className:"login-need-help"},k),this.props.supportsCaptcha&&R&&o.default.createElement(d.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,source:"LOGIN"}))},t})(o.default.Component);t.LoginCredentialsForm=L}));
//# sourceMappingURL=credentials_form.min.js-vfl3ZfJei.map