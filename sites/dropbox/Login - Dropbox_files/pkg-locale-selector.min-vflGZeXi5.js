define("modules/clean/react/locale_selector",["require","exports","tslib","react","lodash","jquery","modules/clean/ajax","modules/clean/intl_router_utils","modules/clean/react/css","modules/clean/react/modal_dig","modules/clean/react/modal_controller","modules/clean/react/sprite","modules/constants/locales","modules/constants/page_load","modules/core/browser","modules/core/i18n","modules/core/notify","modules/core/uri","spectrum-arbor/atoms/arbor_link/index","spectrum-arbor/atoms/arbor_box/index","spectrum-arbor/constants/master_constants"],(function(e,t,l,a,o,r,n,c,s,i,u,d,m,_,f,p,L,h,g,C,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize_module=t.LocaleSelector=t.LocaleSelectorWithoutCss=t.LocaleSelectorModal=void 0,a=l.__importDefault(a),r=l.__importDefault(r),n=l.__importStar(n),u=l.__importStar(u),m=l.__importStar(m),_=l.__importStar(_),f=l.__importStar(f);var E=function(e,t,l){void 0===l&&(l=!1);var a=l?"/team/admin/set_locale":"/set_locale";return L.Notify.success(p.intl.formatMessage({id:"wQFLxr",defaultMessage:"Changing language..."})),n.SilentBackgroundRequest({url:new h.URI({path:a}),data:{locale:e,locale_cont:t},success:function(){return f.redirect(t)}})},b=function(e){var t=e.locale,l=t.decorator,o=t.localeCode,r=t.localeName;return""!==l&&(r+=" ["+l+"]"),a.default.createElement("span",{"data-locale":o},r)};b.displayName="LocaleTag";var T=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCloseModal=function(){return history.pushState("",document.title,f.get_href_no_hash())},t.handleLocaleSelected=function(e){return function(l){return l.preventDefault(),history.pushState("",document.title,f.get_href_no_hash()),u.unmountModal(),E(e,f.get_href_no_hash(),t.props.isTeamAdminSettingsConsole)}},t.renderLocale=function(e,l){return l?a.default.createElement("li",{key:e.localeCode},a.default.createElement("a",{href:c.getCurrentPathWithLocaleCode(e.localeCode)},a.default.createElement(b,{locale:e}))):a.default.createElement("li",{key:e.localeCode},a.default.createElement("button",{className:"locale-option button-as-link react-locale-selector-modal__list-item-button",onClick:t.handleLocaleSelected(e.localeCode)},a.default.createElement(b,{locale:e})))},t.renderLocaleList=function(){var e=t.props.shouldAllowInternalLocales,l=c.isIntlRouterPath(),o=e?m.LIST_OF_LOCALES_WITH_INTERNAL:m.LIST_OF_LOCALES_WITHOUT_INTERNAL;return a.default.createElement("div",{className:"react-locale-selector-modal"},a.default.createElement("ul",{className:"react-locale-selector-modal__list u-unlist u-trim-padding"},o.map((function(e){return t.renderLocale(e,l)}))))},t}return l.__extends(t,e),t.prototype.render=function(){return a.default.createElement(i.Modal,{id:"locale-selector-modal",ref:"modal",className:"uxa-modal",onDismissCompleted:this.handleCloseModal,title:p.intl.formatMessage({id:"tVLdyJ",defaultMessage:"Choose a language:"}),acceptButtonText:null,style:"default"},this.renderLocaleList())},t.displayName="LocaleSelectorModal",t})(a.default.Component);t.LocaleSelectorModal=s.requireCssWithComponent(T,["/static/css/components/react_locale_selector-vfluPHu5g.css","/static/css/font_atlas_grotesk-vfldINMge.css","/static/css/font_sharp_grotesk-vfle4tE4q.css","/static/css/modal-vflp8UKYY.css"]);var I=(function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLocaleLinkClick=function(e){return e.preventDefault(),r.showModal(t.props.isTeamAdminSettingsConsole,t.props.shouldAllowInternalLocales)},t.renderLocaleLink=function(){return t.props.isRebrand?a.default.createElement(g.ArborLink,{size:"micro",hoverStyle:"nav",tag:"button",onClick:t.handleLocaleLinkClick},a.default.createElement(C.ArborBox,{display:"flex",alignItems:"center"},a.default.createElement(C.ArborBox,{rightPaddingSize:"nano"},a.default.createElement(d.Sprite,{group:"web",name:"globe_gray_20x20",alt:""})),a.default.createElement("span",{style:{color:S.COLORS.brand.color__faint__text,fontWeight:"bold"}},a.default.createElement(b,{locale:o.find(m.LIST_OF_LOCALES_WITH_INTERNAL,(function(e){return e.localeCode===_.USER_LOCALE}))})),a.default.createElement(C.ArborBox,{leftPaddingSize:"nano"},a.default.createElement(d.Sprite,{className:"arrow",group:"web",name:"arrow-up-gray",alt:""})))):a.default.createElement("span",{id:"locale-link"},a.default.createElement("button",{className:"button-as-link react-locale-selector-link",title:p.intl.formatMessage({id:"RWqDb6",defaultMessage:"Choose a language"}),onClick:t.handleLocaleLinkClick},a.default.createElement(d.Sprite,{group:"web",name:"globe_gray_20x20",alt:""}),a.default.createElement(b,{locale:o.find(m.LIST_OF_LOCALES_WITH_INTERNAL,(function(e){return e.localeCode===_.USER_LOCALE}))}),a.default.createElement(d.Sprite,{className:"arrow",group:"web",name:"arrow-up-gray",alt:""})))},t}return l.__extends(r,e),r.showModal=function(e,l){return void 0===e&&(e=!1),void 0===l&&(l=!0),u.mountModal(a.default.createElement(t.LocaleSelectorModal,{isTeamAdminSettingsConsole:e,shouldAllowInternalLocales:l}))},r.prototype.render=function(){return a.default.createElement("div",{id:"locale-container"},this.renderLocaleLink())},r.displayName="LocaleSelector",r.defaultProps={isTeamAdminSettingsConsole:!1,shouldAllowInternalLocales:!0,isRebrand:!1},r})(a.default.Component);t.LocaleSelectorWithoutCss=I;var A=s.requireCssWithComponent(I,["/static/css/components/react_locale_selector-vfluPHu5g.css","/static/css/font_atlas_grotesk-vfldINMge.css","/static/css/font_sharp_grotesk-vfle4tE4q.css"]);t.LocaleSelector=A,t.initialize_module=function(e){if(null!=e?e.dom_id:void 0)return r.default(document).ready((function(){return r.default("#"+e.dom_id).click((function(){return A.wrappedClass.showModal()}))}))}})),define("modules/clean/intl_router_utils",["require","exports","tslib","modules/core/browser","modules/constants/locales"],(function(e,t,l,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentPathWithLocaleCode=t.isIntlRouterPath=void 0,a=l.__importStar(a),o=l.__importStar(o),t.isIntlRouterPath=function(){var e=a.get_pathname();if("/"!==e[0])return!1;for(var t=e.split("/",2)[1],l=0,r=o.LIST_OF_LOCALES_WITHOUT_INTERNAL;l<r.length;l++){if(r[l].localeCode===t)return!0}return!1},t.getCurrentPathWithLocaleCode=function(e){var t=a.get_pathname();if("/"!==t[0])return t;var l=t.split("/"),r=l[1];return o.LIST_OF_LOCALES_WITHOUT_INTERNAL.some((function(t){return t.localeCode===e}))&&o.LIST_OF_LOCALES_WITHOUT_INTERNAL.some((function(e){return e.localeCode===r}))?(l[1]=e,l.join("/")):t}}));
//# sourceMappingURL=pkg-locale-selector.min.js-vfl5sBN3g.map