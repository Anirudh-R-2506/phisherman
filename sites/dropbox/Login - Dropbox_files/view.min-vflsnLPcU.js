define(["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/captcha","modules/clean/auth/common/types","modules/clean/auth/register/google_register_button","modules/clean/auth/register/name_fields","modules/clean/react/file_viewer/conversions/conversion_utils","modules/clean/auth/common/stats"],(function(e,t,a,s,r,o,i,n,l,p,m,u,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormView=void 0,s=a.__importDefault(s);var h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={splitSignupStep:0},t.setCaptchaComponent=function(e){t.captchaComponent=e},t}return a.__extends(t,e),t.prototype.handleCaptchaErrors=function(e){return l.handle_captcha_errors(this.captchaComponent,e)},t.prototype.getCaptchaComponent=function(){return this.captchaComponent},t.prototype.getCaptchaResponses=function(){return l.get_captcha_responses(this.captchaComponent)},t.prototype.onContinue=function(){this.setState({splitSignupStep:1}),c.EmailAuthUXAnalyticsLogger.logSplitSignupContinue()},t.prototype.render=function(){var e=this,t=this.props,a=t.className,c=t.variant,h=t.thirdPartyInitiatedSignup,f=t.tosCheckboxProps,g=t.onGoogleRegisterClick,b=t.disabled,S=t.isSubmitting,C=t.maestroStyle,E=t.onInputChange,_=t.showMarketingOptIn,v=t.marketingOptInChecked,M=t.splitSignupEnabled,y=s.default("form_shown","login-form-container","register",a,c,{third_party_auth:h}),N=f||{},P=void 0;N.unsafeLabelHTML||(P=o.intl.formatMessage({id:"mOJi1I",defaultMessage:"I agree to the <a>Dropbox Terms</a>"},{a:function(e){return r.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener"},e)}}));var k=this.props.submitButtonProps||{},x=s.default("login-button","button-primary",k.className,{"button-small":k.variant===p.AuthButtonVariant.SMALL,"button-big":k.variant===p.AuthButtonVariant.BIG}),w=s.default("continue-button","button-primary",k.className,{"button-small":k.variant===p.AuthButtonVariant.SMALL,"button-big":k.variant===p.AuthButtonVariant.BIG}),A=this.props.thirdPartyInitiatedSignup,I=!!this.props.googleRegisterProps&&!A,T=this.props.googleRegisterProps||{},R=r.default.createElement(m.GoogleRegisterButton,{onClick:g,disabled:b||S,variant:T.variant,buttonProps:T.buttonProps}),V=r.default.createElement("div",{className:"hr-label"},r.default.createElement("span",{className:"hr-label__text"},o.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),L=this.props.emailProps||{},B=s.default("input-email","text-input__margin-right",L.className),O=this.props.passwordProps||{},F=s.default("input-password",O.className),G=this.props.maestroStyle;"TOP"===T.position?G=!0:"BOTTOM"===T.position&&(G=!1);var D=N.variant||c,H=void 0===N.inline||N.inline,J=A?o.intl.formatMessage({id:"j7O6M6",defaultMessage:"Create and continue"}):k.text||o.intl.formatMessage({id:"P09UfX",defaultMessage:"Create an account"}),U=o.intl.formatMessage({id:"pV/Btf",defaultMessage:"Continue"}),Z=r.default.createElement(n.AuthTextField,{value:this.props.emailValue,className:B,onChange:E,disabled:b||L.readonly||!1,label:L.label||(C?o.intl.formatMessage({id:"ZuKPpH",defaultMessage:"Email"}):void 0),placeholder:L.placeholder||(this.props.maestroStyle?o.intl.formatMessage({id:"87vAZJ",defaultMessage:"you@mail.com"}):o.intl.formatMessage({id:"ZbTBdC",defaultMessage:"Email"})),error:this.props.emailError,maestroStyle:C,name:"email",type:p.AuthTextInputType.EMAIL,variant:c});return M&&0===this.state.splitSignupStep?r.default.createElement("div",{className:y},r.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},r.default.createElement("div",{className:"credentials-form__fields"},r.default.createElement("div",{className:"register-form__credential-fields"}),r.default.createElement("div",{className:"split-signup-fields"},Z,r.default.createElement("button",{className:w,type:"submit","data-uxa-log":"register_form_continue_button",onClick:function(){return e.onContinue()}},r.default.createElement("span",null,U)))),I&&r.default.createElement("div",{className:"hr-split-signup"}),I&&R,I&&r.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,source:"REGISTER"}))):r.default.createElement("div",{className:y},r.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},G&&I&&R,G&&I&&V,r.default.createElement("div",{className:"credentials-form__fields"},r.default.createElement(u.RegisterFormNameFields,{maestroStyle:C,onInputChange:E,combinedName:this.props.combinedName,fnameError:this.props.fnameError,fnameProps:this.props.fnameProps,lnameProps:this.props.lnameProps,fnameValue:this.props.fnameValue,lnameValue:this.props.lnameValue,disabled:b,variant:c}),r.default.createElement("div",{className:"register-form__credential-fields"},Z,!this.props.thirdPartyInitiatedSignup&&r.default.createElement(n.AuthTextField,{value:this.props.passwordValue,placeholder:O.placeholder||(this.props.maestroStyle?o.intl.formatMessage({id:"klwYHA",defaultMessage:"Minimum 6 characters"}):o.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"password",className:F,inputClassName:"password-input",onChange:E,measureStrength:O.measureStrength,label:O.label||(C?o.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),error:this.props.passwordError,maestroStyle:C,disabled:b,variant:c,passwordStrengthProps:O.strengthMeterProps,type:p.AuthTextInputType.PASSWORD}))),!d.shouldShowSimplifiedModal()&&r.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,source:"REGISTER"}),r.default.createElement(i.AuthCheckbox,{variant:D,className:"agree",disabled:N.disabled||b,maestroStyle:C,error:this.props.tosError,inline:H,onChange:E,name:"tos_agree",checked:this.props.tosChecked,label:N.label||P,unsafeLabelHTML:N.unsafeLabelHTML}),_&&r.default.createElement(i.AuthCheckbox,{variant:D,className:"agree marketing-opt-in-checkbox",disabled:b,maestroStyle:C,inline:H,onChange:E,checked:v,name:"marketing_opt_in",label:o.intl.formatMessage({id:"vRE9NS",defaultMessage:"Iâ€™d like to receive direct marketing email updates from Dropbox"})}),r.default.createElement("button",{className:x,type:"submit","data-uxa-log":"register_form_submit_button",disabled:this.props.disabled||k.disabled||this.props.isSubmitting},r.default.createElement("span",null,J)),!G&&I&&!d.shouldShowSimplifiedModal()&&V,!G&&I&&R,d.shouldShowSimplifiedModal()&&r.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,source:"REGISTER"})))},t})((r=a.__importDefault(r)).default.Component);t.RegisterFormView=h}));
//# sourceMappingURL=view.min.js-vflp5HPax.map